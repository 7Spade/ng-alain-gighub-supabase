# Blueprint æ¶æ§‹é‡æ§‹ - è¦–è¦ºåŒ–æ¯”è¼ƒ

## ğŸ“Š ç•¶å‰æ¶æ§‹ vs æè­°æ¶æ§‹

### ğŸ”· ç•¶å‰æ¶æ§‹ï¼ˆæ©«å‘åˆ†å±¤ï¼‰

```
ä¿®æ”¹ä¸€å€‹ Blueprint Feature éœ€è¦è·¨è¶Šçš„è·¯å¾‘ï¼š

src/app/
â”‚
â”œâ”€â”€ core/                                    â† å±¤ç´š 1: Infrastructure
â”‚   â”œâ”€â”€ infra/
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â””â”€â”€ blueprint.types.ts          âœï¸ æ­¥é©Ÿ 1: å®šç¾©å‹åˆ¥
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ repositories/
â”‚   â”‚       â””â”€â”€ blueprint.repository.ts     âœï¸ æ­¥é©Ÿ 2: å¯¦ä½œè³‡æ–™å­˜å–
â”‚   â”‚
â”‚   â””â”€â”€ facades/
â”‚       â””â”€â”€ blueprint.facade.ts             âœï¸ æ­¥é©Ÿ 5: å»ºç«‹ Facade
â”‚
â”œâ”€â”€ shared/                                  â† å±¤ç´š 2: Shared
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â””â”€â”€ blueprint.models.ts             âœï¸ æ­¥é©Ÿ 3: å®šç¾©æ¥­å‹™æ¨¡å‹
â”‚   â”‚
â”‚   â””â”€â”€ services/
â”‚       â””â”€â”€ blueprint/
â”‚           â””â”€â”€ blueprint.service.ts        âœï¸ æ­¥é©Ÿ 4: å¯¦ä½œæ¥­å‹™é‚è¼¯
â”‚
â””â”€â”€ routes/                                  â† å±¤ç´š 3: Features
    â””â”€â”€ blueprint/
        â””â”€â”€ blueprint-container.component.ts âœï¸ æ­¥é©Ÿ 6: å»ºç«‹ UI

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

é–‹ç™¼ä¸€å€‹åŠŸèƒ½éœ€è¦ï¼š
ğŸ“‚ åœ¨ 6 å€‹ä¸åŒç›®éŒ„é–“åˆ‡æ›
â±ï¸  èŠ±è²» 11.25 å°æ™‚
ğŸ” éœ€è¦ç†è§£æ•´å€‹å°ˆæ¡ˆçš„åˆ†å±¤é‚è¼¯
```

### ç—›é»åˆ†æ

```
ç•¶æˆ‘è¦æ’°å¯« RLS Policy æ™‚...

æ­¥é©Ÿ 1: äº†è§£è³‡æ–™çµæ§‹
â†’ é–‹å•Ÿ core/infra/types/blueprint.types.ts
   çœ‹åˆ°: visibility, owner_id, owner_type æ¬„ä½

æ­¥é©Ÿ 2: äº†è§£æ¥­å‹™æ¨¡å‹
â†’ åˆ‡æ›åˆ° shared/models/blueprint.models.ts
   çœ‹åˆ°: BlueprintVisibilityEnum, BlueprintStatusEnum

æ­¥é©Ÿ 3: äº†è§£æ¬Šé™é‚è¼¯
â†’ åˆ‡æ›åˆ° shared/services/blueprint/blueprint.service.ts
   çœ‹åˆ°: æ¬Šé™æª¢æŸ¥é‚è¼¯

æ­¥é©Ÿ 4: äº†è§£æŸ¥è©¢æ¢ä»¶
â†’ åˆ‡æ›åˆ° core/infra/repositories/blueprint.repository.ts
   çœ‹åˆ°: å¯¦éš›çš„æŸ¥è©¢å¯¦ä½œ

æ­¥é©Ÿ 5: æ’°å¯« RLS Policy
â†’ å›åˆ° Supabase Dashboard
   é–‹å§‹æ’°å¯«... ä½†å·²ç¶“å¿˜è¨˜ä¸€åŠçš„å…§å®¹ ğŸ˜…
   éœ€è¦å†åˆ‡æ›å›å»æŸ¥çœ‹...

ç¸½è¨ˆï¼šåœ¨ 4 å€‹æª”æ¡ˆé–“åˆ‡æ›è‡³å°‘ 8 æ¬¡
```

---

### ğŸ”¶ æè­°æ¶æ§‹ï¼ˆå‚ç›´åˆ‡ç‰‡ï¼‰

```
ä¿®æ”¹ä¸€å€‹ Blueprint Feature åªéœ€è¦åœ¨ä¸€å€‹ç›®éŒ„å…§ï¼š

src/app/features/blueprint/
â”‚
â”œâ”€â”€ index.ts                          # Public API å®šç¾©
â”œâ”€â”€ blueprint.routes.ts               # è·¯ç”±é…ç½®
â”‚
â”œâ”€â”€ shell/                            # å®¹å™¨å±¤ (Smart Components)
â”‚   â”œâ”€â”€ blueprint-shell/
â”‚   â”‚   â”œâ”€â”€ blueprint-shell.component.ts      âœï¸ æ­¥é©Ÿ 6: å»ºç«‹ UI
â”‚   â”‚   â”œâ”€â”€ blueprint-shell.component.html
â”‚   â”‚   â””â”€â”€ blueprint-shell.component.less
â”‚   â””â”€â”€ dialogs/
â”‚
â”œâ”€â”€ ui/                               # å±•ç¤ºå±¤ (Dumb Components)
â”‚   â”œâ”€â”€ canvas/
â”‚   â”œâ”€â”€ task/
â”‚   â”œâ”€â”€ floor/
â”‚   â””â”€â”€ work-zone/
â”‚
â”œâ”€â”€ data-access/                      # æ•¸æ“šè¨ªå•å±¤
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ blueprint-api.service.ts          âœï¸ æ­¥é©Ÿ 4: å¯¦ä½œæ¥­å‹™é‚è¼¯
â”‚   â”‚   â””â”€â”€ task-api.service.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ stores/                       # Signal Store
â”‚   â”‚   â”œâ”€â”€ blueprint.store.ts                âœï¸ æ­¥é©Ÿ 5: ç‹€æ…‹ç®¡ç†
â”‚   â”‚   â””â”€â”€ task.store.ts
â”‚   â”‚
â”‚   â””â”€â”€ repositories/
â”‚       â””â”€â”€ blueprint.repository.ts           âœï¸ æ­¥é©Ÿ 2: å¯¦ä½œè³‡æ–™å­˜å–
â”‚
â”œâ”€â”€ domain/                           # é ˜åŸŸå±¤
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â””â”€â”€ blueprint.model.ts                âœï¸ æ­¥é©Ÿ 3: å®šç¾©æ¥­å‹™æ¨¡å‹
â”‚   â”‚
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ blueprint.types.ts                âœï¸ æ­¥é©Ÿ 1: å®šç¾©å‹åˆ¥
â”‚   â”‚
â”‚   â”œâ”€â”€ enums/
â”‚   â”‚   â””â”€â”€ blueprint-status.enum.ts
â”‚   â”‚
â”‚   â””â”€â”€ interfaces/
â”‚       â””â”€â”€ blueprint-config.interface.ts
â”‚
â”œâ”€â”€ utils/                            # å·¥å…·å‡½æ•¸
â”‚   â”œâ”€â”€ blueprint-validator.ts
â”‚   â””â”€â”€ blueprint-formatter.ts
â”‚
â”œâ”€â”€ constants/                        # å¸¸é‡å®šç¾©
â”‚   â””â”€â”€ blueprint-permissions.constant.ts
â”‚
â””â”€â”€ README.md                         # Feature æ–‡æª”

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

é–‹ç™¼ä¸€å€‹åŠŸèƒ½åªéœ€è¦ï¼š
ğŸ“‚ åœ¨ 1 å€‹ç›®éŒ„å…§å·¥ä½œ
â±ï¸  èŠ±è²» 8.5 å°æ™‚ (-24%)
ğŸ¯ åªéœ€è¦ç†è§£é€™å€‹ feature
```

### å„ªå‹¢å±•ç¤º

```
ç•¶æˆ‘è¦æ’°å¯« RLS Policy æ™‚...

ä¸€åˆ‡éƒ½åœ¨ features/blueprint/ å…§ï¼

é–‹å•Ÿ VSCode Split View:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ domain/types/            â”‚ data-access/             â”‚
â”‚ blueprint.types.ts       â”‚ repositories/            â”‚
â”‚                          â”‚ blueprint.repository.ts  â”‚
â”‚ âœ… çœ‹åˆ°æ‰€æœ‰æ¬„ä½å®šç¾©      â”‚ âœ… çœ‹åˆ°æŸ¥è©¢å¯¦ä½œ           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ domain/models/           â”‚ data-access/services/    â”‚
â”‚ blueprint.model.ts       â”‚ blueprint-api.service.ts â”‚
â”‚                          â”‚                          â”‚
â”‚ âœ… çœ‹åˆ°æ¥­å‹™æ¨¡å‹          â”‚ âœ… çœ‹åˆ°æ¬Šé™é‚è¼¯           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç¾åœ¨æ’°å¯« RLS Policy:
â†’ æ‰€æœ‰ context éƒ½åœ¨çœ¼å‰
â†’ ä¸éœ€è¦åˆ‡æ›ç›®éŒ„
â†’ ä¸æœƒéºæ¼æ¢ä»¶
â†’ å¯ä»¥å¿«é€Ÿé©—è­‰

ç¸½è¨ˆï¼šé›¶åˆ‡æ›ï¼Œæ‰€æœ‰è³‡è¨Šåœ¨åŒä¸€å€‹è¦–çª— ğŸ‰
```

---

## ğŸ“ˆ æ•ˆç‡å°æ¯”åœ–

### é–‹ç™¼æ™‚é–“å°æ¯”

```
ç•¶å‰æ¶æ§‹ï¼ˆæ©«å‘åˆ†å±¤ï¼‰:
ç†è§£éœ€æ±‚   è¨­è¨ˆæ¶æ§‹   å¯¦ä½œé–‹ç™¼        æ¸¬è©¦é©—è­‰
[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ]
30 åˆ†é˜    45 åˆ†é˜    8 å°æ™‚            2 å°æ™‚
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
                                    ç¸½è¨ˆ: 11.25 å°æ™‚


æè­°æ¶æ§‹ï¼ˆå‚ç›´åˆ‡ç‰‡ï¼‰:
ç†è§£éœ€æ±‚   è¨­è¨ˆæ¶æ§‹ å¯¦ä½œé–‹ç™¼      æ¸¬è©¦é©—è­‰
[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ]
30 åˆ†é˜    30 åˆ†é˜  6 å°æ™‚        1.5 å°æ™‚
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
                                ç¸½è¨ˆ: 8.5 å°æ™‚

ç¯€çœæ™‚é–“: 2.75 å°æ™‚ (-24%)
```

### ç›®éŒ„åˆ‡æ›æ¬¡æ•¸å°æ¯”

```
ç•¶å‰æ¶æ§‹:
é–‹ç™¼ä¸€å€‹ Feature å¹³å‡éœ€è¦åˆ‡æ›ç›®éŒ„:
routes/ âŸ· services/ âŸ· models/ âŸ· repositories/ âŸ· types/ âŸ· facades/
   â†“         â†“         â†“           â†“            â†“          â†“
  UI     æ¥­å‹™é‚è¼¯   æ¥­å‹™æ¨¡å‹    è³‡æ–™å­˜å–      å‹åˆ¥å®šç¾©    çµ±ä¸€API

å¹³å‡æ¯æ¬¡é–‹ç™¼: åˆ‡æ› 20-30 æ¬¡
æ¯æ¬¡åˆ‡æ›è€—æ™‚: 10-15 ç§’
ç¸½æµªè²»æ™‚é–“: 5-7 åˆ†é˜/æ¬¡


æè­°æ¶æ§‹:
é–‹ç™¼ä¸€å€‹ Feature åœ¨åŒä¸€å€‹ç›®éŒ„å…§:
features/blueprint/
   â”œâ”€â”€ domain/      â† å‹åˆ¥ + æ¨¡å‹
   â”œâ”€â”€ data-access/ â† è³‡æ–™å­˜å– + æ¥­å‹™é‚è¼¯
   â””â”€â”€ shell/       â† UI

å¹³å‡æ¯æ¬¡é–‹ç™¼: åˆ‡æ› 3-5 æ¬¡
æ¯æ¬¡åˆ‡æ›è€—æ™‚: 2-3 ç§’
ç¸½æµªè²»æ™‚é–“: < 1 åˆ†é˜/æ¬¡

ç¯€çœæ™‚é–“: 5-6 åˆ†é˜/æ¬¡ (-85%)
```

---

## ğŸ” RLS Policy æ’°å¯«æµç¨‹å°æ¯”

### å ´æ™¯ï¼šæ’°å¯« Blueprint å­˜å–æ¬Šé™è¦å‰‡

#### ç•¶å‰æ¶æ§‹æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Task: æ’°å¯« Blueprint RLS Policy                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 1: äº†è§£è³‡æ–™çµæ§‹
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é–‹å•Ÿ: core/infra/types/blueprint.types.ts              â”‚
â”‚                                                         â”‚
â”‚ interface Blueprint {                                   â”‚
â”‚   visibility: BlueprintVisibility;  â† éœ€è¦çš„è³‡è¨Š       â”‚
â”‚   owner_id: string;                 â† éœ€è¦çš„è³‡è¨Š       â”‚
â”‚   owner_type: OwnerType;            â† éœ€è¦çš„è³‡è¨Š       â”‚
â”‚ }                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“ åˆ‡æ›ç›®éŒ„ (10 ç§’)

Step 2: äº†è§£æ¥­å‹™æ¨¡å‹
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é–‹å•Ÿ: shared/models/blueprint.models.ts                â”‚
â”‚                                                         â”‚
â”‚ enum BlueprintVisibilityEnum {                          â”‚
â”‚   PRIVATE = 'private',              â† éœ€è¦çš„è³‡è¨Š       â”‚
â”‚   ORGANIZATION = 'organization',    â† éœ€è¦çš„è³‡è¨Š       â”‚
â”‚   TEAM = 'team',                                        â”‚
â”‚   PUBLIC = 'public'                                     â”‚
â”‚ }                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“ åˆ‡æ›ç›®éŒ„ (10 ç§’)

Step 3: äº†è§£æŸ¥è©¢é‚è¼¯
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é–‹å•Ÿ: core/infra/repositories/blueprint.repository.ts  â”‚
â”‚                                                         â”‚
â”‚ getAccessibleBlueprints(userId: string) {               â”‚
â”‚   return this.supabase                                  â”‚
â”‚     .from('blueprints')                                 â”‚
â”‚     .select('*')                                        â”‚
â”‚     .or(`visibility.eq.public,owner_id.eq.${userId}`)   â”‚
â”‚ }                                    â† éœ€è¦çš„è³‡è¨Š       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“ åˆ‡æ›ç›®éŒ„ (10 ç§’)

Step 4: äº†è§£æ¬Šé™é‚è¼¯
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é–‹å•Ÿ: shared/services/blueprint/blueprint.service.ts   â”‚
â”‚                                                         â”‚
â”‚ canAccessBlueprint(blueprint: Blueprint, userId: string) â”‚
â”‚   if (blueprint.visibility === 'public') return true;   â”‚
â”‚   if (blueprint.owner_id === userId) return true;       â”‚
â”‚   // ... more logic                â† éœ€è¦çš„è³‡è¨Š       â”‚
â”‚ }                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“ åˆ‡æ›åˆ° Supabase (20 ç§’)

Step 5: æ’°å¯« RLS Policy
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é–‹å•Ÿ: Supabase Dashboard                                â”‚
â”‚                                                         â”‚
â”‚ CREATE POLICY "blueprint_access"                        â”‚
â”‚ ON blueprints FOR SELECT                                â”‚
â”‚ USING (                                                 â”‚
â”‚   visibility = 'public'            â† å¾ Step 1 è¨˜æ†¶   â”‚
â”‚   OR owner_id = auth.uid()         â† å¾ Step 2 è¨˜æ†¶   â”‚
â”‚   OR ...                           â† å¿˜è¨˜äº†ï¼Œå›å»æŸ¥... â”‚
â”‚ );                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç¸½è€—æ™‚: ~5 åˆ†é˜ï¼ˆå«ä¾†å›æŸ¥çœ‹ï¼‰
åˆ‡æ›æ¬¡æ•¸: 8+ æ¬¡
éŒ¯èª¤é¢¨éšª: é«˜ï¼ˆå®¹æ˜“éºæ¼æ¢ä»¶ï¼‰
```

---

#### æè­°æ¶æ§‹æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Task: æ’°å¯« Blueprint RLS Policy                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åœ¨ VSCode ä¸­é–‹å•Ÿ features/blueprint/ ç›®éŒ„

ä½¿ç”¨ Split View åŒæ™‚æŸ¥çœ‹æ‰€æœ‰ç›¸é—œæª”æ¡ˆ:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VSCode Layout                                           â”‚
â”‚                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ domain/types/    â”‚ domain/models/   â”‚ data-access/  â”‚â”‚
â”‚ â”‚ blueprint.       â”‚ blueprint.       â”‚ repositories/ â”‚â”‚
â”‚ â”‚ types.ts         â”‚ models.ts        â”‚ blueprint.    â”‚â”‚
â”‚ â”‚                  â”‚                  â”‚ repository.ts â”‚â”‚
â”‚ â”‚ interface        â”‚ enum             â”‚ getAccessible â”‚â”‚
â”‚ â”‚ Blueprint {      â”‚ VisibilityEnum   â”‚ Blueprints() {â”‚â”‚
â”‚ â”‚   visibility...  â”‚ {                â”‚   .select()   â”‚â”‚
â”‚ â”‚   owner_id...    â”‚   PRIVATE,       â”‚   .or(...)    â”‚â”‚
â”‚ â”‚   owner_type...  â”‚   PUBLIC,        â”‚ }             â”‚â”‚
â”‚ â”‚ }                â”‚   ...            â”‚               â”‚â”‚
â”‚ â”‚                  â”‚                  â”‚               â”‚â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚ â”‚ data-access/services/blueprint-api.service.ts       â”‚â”‚
â”‚ â”‚                                                     â”‚â”‚
â”‚ â”‚ canAccessBlueprint(blueprint, userId) {             â”‚â”‚
â”‚ â”‚   if (blueprint.visibility === 'public') return trueâ”‚â”‚
â”‚ â”‚   if (blueprint.owner_id === userId) return true;   â”‚â”‚
â”‚ â”‚   // ...                                            â”‚â”‚
â”‚ â”‚ }                                                   â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ‰€æœ‰è³‡è¨Šä¸€ç›®ç­ç„¶ï¼

               â†“ åˆ‡æ›åˆ° Supabase (10 ç§’)

æ’°å¯« RLS Policy:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Supabase Dashboard                                      â”‚
â”‚                                                         â”‚
â”‚ CREATE POLICY "blueprint_access"                        â”‚
â”‚ ON blueprints FOR SELECT                                â”‚
â”‚ USING (                                                 â”‚
â”‚   visibility = 'public'            â† æ¸…æ¥šå¯è¦‹         â”‚
â”‚   OR owner_id = auth.uid()         â† æ¸…æ¥šå¯è¦‹         â”‚
â”‚   OR (                             â† æ¸…æ¥šå¯è¦‹         â”‚
â”‚     owner_type = 'organization'                         â”‚
â”‚     AND owner_id IN (                                   â”‚
â”‚       SELECT organization_id                            â”‚
â”‚       FROM organization_members                         â”‚
â”‚       WHERE user_id = auth.uid()                        â”‚
â”‚     )                                                   â”‚
â”‚   )                                                     â”‚
â”‚ );                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç¸½è€—æ™‚: ~2 åˆ†é˜ï¼ˆæ¸›å°‘ 60%ï¼‰
åˆ‡æ›æ¬¡æ•¸: 1 æ¬¡ï¼ˆæ¸›å°‘ 87.5%ï¼‰
éŒ¯èª¤é¢¨éšª: ä½ï¼ˆæ‰€æœ‰ context å¯è¦‹ï¼‰
```

---

## ğŸ¯ ä¸¦è¡Œé–‹ç™¼å ´æ™¯å°æ¯”

### å ´æ™¯ï¼šå…©å€‹åœ˜éšŠåŒæ™‚é–‹ç™¼ä¸åŒåŠŸèƒ½

#### ç•¶å‰æ¶æ§‹ï¼ˆå®¹æ˜“è¡çªï¼‰

```
Team A é–‹ç™¼ Blueprint Feature:
â”œâ”€â”€ ä¿®æ”¹ shared/services/common.service.ts      â† å…±ç”¨æª”æ¡ˆ
â”œâ”€â”€ ä¿®æ”¹ core/infra/repositories/base.repository.ts â† å…±ç”¨æª”æ¡ˆ
â””â”€â”€ ä¿®æ”¹ routes/blueprint/...

Team B é–‹ç™¼ Project Feature:
â”œâ”€â”€ ä¿®æ”¹ shared/services/common.service.ts      â† è¡çªï¼
â”œâ”€â”€ ä¿®æ”¹ core/infra/repositories/base.repository.ts â† è¡çªï¼
â””â”€â”€ ä¿®æ”¹ routes/project/...

çµæœ:
âŒ Git Merge Conflicts
âŒ éœ€è¦å”èª¿èˆ‡ç­‰å¾…
âŒ å»¶é²ä¸Šç·šæ™‚ç¨‹
```

#### æè­°æ¶æ§‹ï¼ˆé›¶è¡çªï¼‰

```
Team A é–‹ç™¼ Blueprint Feature:
â””â”€â”€ æ‰€æœ‰ä¿®æ”¹åœ¨ features/blueprint/ å…§
    â”œâ”€â”€ domain/
