# æ–°åŠŸèƒ½é–‹ç™¼é †åºæŒ‡å—

> **é©ç”¨ç¯„åœ**ï¼šæ‰€æœ‰æ–°åŠŸèƒ½æ¨¡çµ„ï¼ˆé€šç”¨é–‹ç™¼æ€ç¶­é †åºï¼‰  
> **æ¶æ§‹æ¨¡å¼**ï¼šäº”å±¤æ¶æ§‹ï¼ˆTypes â†’ Repositories â†’ Models â†’ Services â†’ Facadesï¼‰  
> **æœ€å¾Œæ›´æ–°**ï¼š2025-01-19

---

## ğŸ“‹ ç›®éŒ„

1. [é–‹ç™¼å‰æº–å‚™](#é–‹ç™¼å‰æº–å‚™)
2. [äº”å±¤æ¶æ§‹é–‹ç™¼é †åº](#äº”å±¤æ¶æ§‹é–‹ç™¼é †åº)
3. [è©³ç´°é–‹ç™¼æ­¥é©Ÿ](#è©³ç´°é–‹ç™¼æ­¥é©Ÿ)
4. [æª¢æŸ¥æ¸…å–®](#æª¢æŸ¥æ¸…å–®)
5. [æ–°åŠŸèƒ½æ¨¡çµ„é–‹ç™¼ç¤ºä¾‹](#æ–°åŠŸèƒ½æ¨¡çµ„é–‹ç™¼ç¤ºä¾‹)

---

## ğŸ¯ é–‹ç™¼å‰æº–å‚™

### 1. éœ€æ±‚åˆ†æ

- [ ] æ˜ç¢ºåŠŸèƒ½éœ€æ±‚ï¼ˆPRDã€ç”¨æˆ¶æ•…äº‹ï¼‰
- [ ] ç¢ºèªæ¥­å‹™æµç¨‹å’Œè¦å‰‡
- [ ] è­˜åˆ¥ç›¸é—œçš„ç¾æœ‰æ¨¡çµ„å’Œä¾è³´
- [ ] è©•ä¼°è¤‡é›œåº¦å’Œå„ªå…ˆç´š

### 2. è³‡æ–™åº«è¨­è¨ˆ

- [ ] è¨­è¨ˆè³‡æ–™è¡¨çµæ§‹ï¼ˆå°ç…§ 51 å¼µè¡¨æ¶æ§‹ï¼‰
- [ ] ç¢ºèªæ˜¯å¦éœ€è¦æ–°å¢è³‡æ–™è¡¨
- [ ] è¨­è¨ˆ RLS ç­–ç•¥ï¼ˆåƒè€ƒå®‰å…¨æ–‡æª”ï¼‰
- [ ] æº–å‚™è³‡æ–™åº«é·ç§»è…³æœ¬
- [ ] ä½¿ç”¨ `@SUPABASE` MCP å·¥å…·é©—è­‰è¨­è¨ˆ

### 3. æ¶æ§‹è¦åŠƒ

- [ ] ç¢ºèªåŠŸèƒ½å±¬æ–¼å“ªå€‹æ¥­å‹™æ¨¡çµ„ï¼ˆ11 å€‹æ¨¡çµ„ä¹‹ä¸€ï¼‰
- [ ] è¦åŠƒéœ€è¦å“ªäº›å±¤ç´šï¼ˆTypesã€Repositoriesã€Modelsã€Servicesã€Facadesï¼‰
- [ ] ç¢ºèªèˆ‡ç¾æœ‰æ¨¡çµ„çš„æ•´åˆé»
- [ ] è¨­è¨ˆ API ä»‹é¢ï¼ˆå¦‚éœ€è¦ï¼‰

---

## ğŸ—ï¸ äº”å±¤æ¶æ§‹é–‹ç™¼é †åº

### æ¶æ§‹å±¤ç´šåœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Facades å±¤ï¼ˆé–€é¢å±¤ï¼‰              â”‚  â† ç¬¬ 5 æ­¥ï¼šæœ€å¾Œé–‹ç™¼
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Services å±¤ï¼ˆæ¥­å‹™é‚è¼¯å±¤ï¼‰         â”‚  â† ç¬¬ 4 æ­¥ï¼šä¾èµ– Repositories + Models
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Models å±¤ï¼ˆæ•¸æ“šæ¨¡å‹å±¤ï¼‰           â”‚  â† ç¬¬ 3 æ­¥ï¼šä¾èµ– Typesï¼ˆå¯èˆ‡ Repositories ä¸¦è¡Œï¼‰
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Repositories å±¤ï¼ˆæ•¸æ“šè¨ªå•å±¤ï¼‰     â”‚  â† ç¬¬ 2 æ­¥ï¼šä¾èµ– Types
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Types å±¤ï¼ˆé¡å‹å®šç¾©å±¤ï¼‰            â”‚  â† ç¬¬ 1 æ­¥ï¼šæœ€åº•å±¤ï¼Œæœ€å…ˆé–‹ç™¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¨™æº–é–‹ç™¼æµç¨‹

```
ç¬¬ 1 æ­¥ï¼šTypes å±‚ï¼ˆå¿…é ˆæœ€å…ˆå®Œæˆï¼‰
  â†“
ç¬¬ 2 æ­¥ï¼šRepositories å±‚ï¼ˆä¾èµ– Typesï¼‰
  â†“
ç¬¬ 3 æ­¥ï¼šModels å±‚ï¼ˆä¾èµ– Typesï¼Œå¯èˆ‡ Repositories ä¸¦è¡Œï¼‰
  â†“
ç¬¬ 4 æ­¥ï¼šServices å±‚ï¼ˆä¾èµ– Repositories + Modelsï¼‰
  â†“
ç¬¬ 5 æ­¥ï¼šFacades å±‚ï¼ˆä¾èµ– Servicesï¼‰
  â†“
ç¬¬ 6 æ­¥ï¼šRoutes/Components å±‚ï¼ˆä¾èµ– Facadesï¼‰
  â†“
ç¬¬ 7 æ­¥ï¼šæ¸¬è©¦èˆ‡æ–‡æª”
```

---

## ğŸ“ è©³ç´°é–‹ç™¼æ­¥é©Ÿ

### ç¬¬ 1 æ­¥ï¼šTypes å±¤ï¼ˆæœ€åº•å±¤ï¼‰

**å„ªå…ˆç´š**ï¼šP0ï¼ˆå¿…é ˆæœ€å…ˆå®Œæˆï¼‰

**ä½ç½®**ï¼š`src/app/core/infra/types/`

**è·è²¬**ï¼š
- å¾ Supabase ç”Ÿæˆ `database.types.ts`ï¼ˆåŒ…å«æ‰€æœ‰è¡¨çš„é¡å‹ï¼‰
- å®šç¾©æ¥­å‹™æ¨¡çµ„é¡å‹æ–‡ä»¶ï¼ˆå¦‚ `finance.types.ts`ï¼‰

**ä¾è³´**ï¼šç„¡ï¼ˆæœ€åº•å±¤ï¼‰

**é–‹ç™¼æ­¥é©Ÿ**ï¼š

1. **ç”Ÿæˆ/æ›´æ–° database.types.ts**
   ```bash
   # ä½¿ç”¨ Supabase MCP å·¥å…·ç”Ÿæˆé¡å‹
   # ç¢ºä¿æ–°è¡¨å·²åŒ…å«åœ¨é¡å‹å®šç¾©ä¸­
   ```

2. **å‰µå»ºæ¥­å‹™æ¨¡çµ„é¡å‹æ–‡ä»¶**ï¼ˆå¦‚éœ€è¦ï¼‰
   ```typescript
   // src/app/core/infra/types/{feature}.types.ts
   import { Database } from './database.types';
   
   // å¾ database.types.ts æå–é¡å‹
   export type FeatureItem = Database['public']['Tables']['feature_items']['Row'];
   export type FeatureItemInsert = Database['public']['Tables']['feature_items']['Insert'];
   export type FeatureItemUpdate = Database['public']['Tables']['feature_items']['Update'];
   
   // æ¥­å‹™ç›¸é—œé¡å‹å®šç¾©
   export type ItemType = 'type1' | 'type2' | 'type3';
   export type ItemStatus = 'active' | 'inactive' | 'archived';
   ```

3. **å°å‡ºé¡å‹**
   ```typescript
   // src/app/core/infra/types/index.ts
   export * from './finance.types';
   ```

**æª¢æŸ¥æ¸…å–®**ï¼š
- [ ] æ‰€æœ‰æ–°è¡¨çš„é¡å‹å®šç¾©å·²åŒ…å«åœ¨ `database.types.ts`
- [ ] æ¥­å‹™æ¨¡çµ„é¡å‹æ–‡ä»¶å·²å‰µå»ºï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] é¡å‹å·²æ­£ç¢ºå°å‡º
- [ ] é¡å‹å®šç¾©èˆ‡è³‡æ–™åº«çµæ§‹ä¸€è‡´
- [ ] é€šé TypeScript ç·¨è­¯æª¢æŸ¥ï¼ˆ`yarn type-check`ï¼‰

---

### ç¬¬ 2 æ­¥ï¼šRepositories å±¤

**å„ªå…ˆç´š**ï¼šP0ï¼ˆä¾è³´ Types å±¤ï¼‰

**ä½ç½®**ï¼š`src/app/core/infra/repositories/`

**è·è²¬**ï¼š
- å°è£è³‡æ–™åº«è¨ªå•
- è™•ç† snake_case â†” camelCase è½‰æ›
- çµ±ä¸€éŒ¯èª¤è™•ç†

**ä¾è³´**ï¼š
- âœ… Types å±¤ï¼ˆå¿…é ˆï¼‰
- âœ… BaseRepositoryï¼ˆåŸºç¤è¨­æ–½ï¼‰
- âœ… SupabaseServiceï¼ˆåŸºç¤è¨­æ–½ï¼‰

**é–‹ç™¼æ­¥é©Ÿ**ï¼š

1. **å‰µå»º Repository æ–‡ä»¶**
   ```typescript
   // src/app/core/infra/repositories/{feature}-item.repository.ts
   import { Injectable, inject } from '@angular/core';
   import { Observable } from 'rxjs';
   import { BaseRepository, QueryOptions } from '@core';
   import { 
     FeatureItem, 
     FeatureItemInsert, 
     FeatureItemUpdate 
   } from '@core';
   
   @Injectable({ providedIn: 'root' })
   export class FeatureItemRepository extends BaseRepository<
     FeatureItem,
     FeatureItemInsert,
     FeatureItemUpdate
   > {
     protected tableName = 'feature_items';
     
     // å¯é¸ï¼šæ·»åŠ ç‰¹å®šæŸ¥è©¢æ–¹æ³•
     findByOwnerId(ownerId: string, options?: QueryOptions): Observable<FeatureItem[]> {
       return this.findAll({
         ...options,
         filters: {
           ...options?.filters,
           ownerId, // æœƒè‡ªå‹•è½‰æ›ç‚º owner_id
         },
       });
     }
     
     findByStatus(status: ItemStatus, options?: QueryOptions): Observable<FeatureItem[]> {
       return this.findAll({
         ...options,
         filters: {
           ...options?.filters,
           status,
         },
       });
     }
   }
   ```

2. **å°å‡º Repository**
   ```typescript
   // src/app/core/infra/repositories/index.ts
   export * from './{feature}-item.repository';
   ```

3. **åœ¨ core/index.ts ä¸­å°å‡º**
   ```typescript
   // src/app/core/index.ts
   export * from './infra/repositories';
   ```

**æª¢æŸ¥æ¸…å–®**ï¼š
- [ ] Repository ç¹¼æ‰¿è‡ª `BaseRepository`
- [ ] `tableName` å·²æ­£ç¢ºè¨­ç½®
- [ ] é¡å‹åƒæ•¸æ­£ç¢ºï¼ˆEntity, Insert, Updateï¼‰
- [ ] ç‰¹å®šæŸ¥è©¢æ–¹æ³•å·²å¯¦ç¾ï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] Repository å·²æ­£ç¢ºå°å‡º
- [ ] é€šé TypeScript ç·¨è­¯æª¢æŸ¥
- [ ] æ¸¬è©¦åŸºæœ¬ CRUD æ“ä½œï¼ˆå¯é¸ï¼Œä½†å»ºè­°ï¼‰

---

### ç¬¬ 3 æ­¥ï¼šModels å±¤ï¼ˆå¯èˆ‡ Repositories ä¸¦è¡Œï¼‰

**å„ªå…ˆç´š**ï¼šP0ï¼ˆå¯èˆ‡ Repositories ä¸¦è¡Œé–‹ç™¼ï¼‰

**ä½ç½®**ï¼š`src/app/shared/models/`

**è·è²¬**ï¼š
- å®šç¾©æ¥­å‹™æ¨¡å‹ï¼ˆcamelCaseï¼‰
- æä¾›æ¥­å‹™ç›¸é—œçš„é¡å‹å®šç¾©å’Œæšèˆ‰

**ä¾è³´**ï¼š
- âœ… Types å±¤ï¼ˆå¿…é ˆï¼Œç”¨æ–¼é¡å‹æå–ï¼‰
- âš ï¸ å¯åƒè€ƒ Repositoriesï¼ˆä½†ä¸å¼·åˆ¶ä¾è³´ï¼‰

**é–‹ç™¼æ­¥é©Ÿ**ï¼š

1. **å‰µå»º Models æ–‡ä»¶**
   ```typescript
   // src/app/shared/models/{feature}.models.ts
   import { FeatureItem } from '@core';
   
   // å¾ Types å±¤æå–ä¸¦è½‰æ›ç‚ºæ¥­å‹™æ¨¡å‹
   export type FeatureItemModel = FeatureItem;
   
   // æ¥­å‹™ç›¸é—œæšèˆ‰
   export enum ItemType {
     TYPE1 = 'type1',
     TYPE2 = 'type2',
     TYPE3 = 'type3',
   }
   
   export enum ItemStatus {
     ACTIVE = 'active',
     INACTIVE = 'inactive',
     ARCHIVED = 'archived',
   }
   
   // æ¥­å‹™ç›¸é—œé¡å‹
   export interface ItemSummary {
     totalCount: number;
     activeCount: number;
     inactiveCount: number;
   }
   
   // æ¥­å‹™ç›¸é—œæ¥å£
   export interface CreateItemRequest {
     name: string;
     type: ItemType;
     description?: string;
   }
   ```

2. **å°å‡º Models**
   ```typescript
   // src/app/shared/models/index.ts
   export * from './{feature}.models';
   ```

**æª¢æŸ¥æ¸…å–®**ï¼š
- [ ] Models æ–‡ä»¶å·²å‰µå»º
- [ ] å¾ Types å±¤æ­£ç¢ºæå–é¡å‹
- [ ] æ¥­å‹™ç›¸é—œæšèˆ‰å’Œé¡å‹å·²å®šç¾©
- [ ] Models å·²æ­£ç¢ºå°å‡º
- [ ] é€šé TypeScript ç·¨è­¯æª¢æŸ¥

---

### ç¬¬ 4 æ­¥ï¼šServices å±¤

**å„ªå…ˆç´š**ï¼šP0ï¼ˆä¾è³´ Repositories + Modelsï¼‰

**ä½ç½®**ï¼š`src/app/shared/services/`

**è·è²¬**ï¼š
- æ¥­å‹™é‚è¼¯è™•ç†
- ç‹€æ…‹ç®¡ç†ï¼ˆä½¿ç”¨ Signalsï¼‰
- å”èª¿å¤šå€‹ Repositories

**ä¾è³´**ï¼š
- âœ… Repositories å±¤ï¼ˆå¿…é ˆï¼‰
- âœ… Models å±¤ï¼ˆå¿…é ˆï¼‰
- âœ… Angular Signalsï¼ˆç‹€æ…‹ç®¡ç†ï¼‰

**é–‹ç™¼æ­¥é©Ÿ**ï¼š

1. **å‰µå»º Service æ–‡ä»¶**
   ```typescript
   // src/app/shared/services/{feature}/{feature}-item.service.ts
   import { Injectable, inject, signal, computed } from '@angular/core';
   import { Observable, firstValueFrom } from 'rxjs';
   import { FeatureItemRepository } from '@core';
   import { 
     FeatureItemModel, 
     ItemType, 
     ItemStatus,
     CreateItemRequest,
     ItemSummary 
   } from '@shared';
   
   @Injectable({ providedIn: 'root' })
   export class FeatureItemService {
     private readonly itemRepo = inject(FeatureItemRepository);
     
     // ä½¿ç”¨ Signals ç®¡ç†ç‹€æ…‹
     private itemsState = signal<FeatureItemModel[]>([]);
     private selectedItemState = signal<FeatureItemModel | null>(null);
     private loadingState = signal<boolean>(false);
     private errorState = signal<string | null>(null);
     
     // æš´éœ² ReadonlySignal çµ¦çµ„ä»¶
     readonly items = this.itemsState.asReadonly();
     readonly selectedItem = this.selectedItemState.asReadonly();
     readonly loading = this.loadingState.asReadonly();
     readonly error = this.errorState.asReadonly();
     
     // Computed signals
     readonly activeItems = computed(() => 
       this.items().filter(item => item.status === ItemStatus.ACTIVE)
     );
     
     readonly summary = computed<ItemSummary>(() => {
       const items = this.items();
       return {
         totalCount: items.length,
         activeCount: items.filter(i => i.status === ItemStatus.ACTIVE).length,
         inactiveCount: items.filter(i => i.status === ItemStatus.INACTIVE).length,
       };
     });
     
     // æ¥­å‹™é‚è¼¯æ–¹æ³•
     async loadItems(ownerId: string): Promise<void> {
       this.loadingState.set(true);
       this.errorState.set(null);
       
       try {
         const items = await firstValueFrom(
           this.itemRepo.findByOwnerId(ownerId)
         );
         this.itemsState.set(items);
       } catch (error) {
         this.errorState.set(error instanceof Error ? error.message : 'Unknown error');
         throw error;
       } finally {
         this.loadingState.set(false);
       }
     }
     
     async createItem(request: CreateItemRequest): Promise<FeatureItemModel> {
       this.loadingState.set(true);
       this.errorState.set(null);
       
       try {
         const newItem = await firstValueFrom(
           this.itemRepo.create({
             name: request.name,
             type: request.type,
             description: request.description,
             status: ItemStatus.ACTIVE,
           })
         );
         
         // æ›´æ–°ç‹€æ…‹
         this.itemsState.update(items => [...items, newItem]);
         
         return newItem;
       } catch (error) {
         this.errorState.set(error instanceof Error ? error.message : 'Unknown error');
         throw error;
       } finally {
         this.loadingState.set(false);
       }
     }
     
     // æ›´å¤šæ¥­å‹™é‚è¼¯æ–¹æ³•...
   }
   ```

2. **å°å‡º Service**
   ```typescript
   // src/app/shared/services/{feature}/index.ts
   export * from './{feature}-item.service';
   ```

3. **åœ¨ shared/services/index.ts ä¸­å°å‡º**
   ```typescript
   // src/app/shared/services/index.ts
   export * from './{feature}';
   ```

**æª¢æŸ¥æ¸…å–®**ï¼š
- [ ] Service ä½¿ç”¨ `@Injectable({ providedIn: 'root' })`
- [ ] ä½¿ç”¨ `inject()` é€²è¡Œä¾è³´æ³¨å…¥
- [ ] ä½¿ç”¨ Signals ç®¡ç†ç‹€æ…‹ï¼ˆ`signal()`, `computed()`ï¼‰
- [ ] æš´éœ² `ReadonlySignal` çµ¦çµ„ä»¶
- [ ] æ¥­å‹™é‚è¼¯æ–¹æ³•å·²å¯¦ç¾
- [ ] éŒ¯èª¤è™•ç†å·²å¯¦ç¾
- [ ] Loading ç‹€æ…‹ç®¡ç†å·²å¯¦ç¾
- [ ] Service å·²æ­£ç¢ºå°å‡º
- [ ] é€šé TypeScript ç·¨è­¯æª¢æŸ¥
- [ ] å–®å…ƒæ¸¬è©¦å·²ç·¨å¯«ï¼ˆå»ºè­° â‰¥80% è¦†è“‹ç‡ï¼‰

---

### ç¬¬ 5 æ­¥ï¼šFacades å±¤

**å„ªå…ˆç´š**ï¼šP0ï¼ˆä¾è³´ Services å±¤ï¼‰

**ä½ç½®**ï¼š`src/app/core/facades/`

**è·è²¬**ï¼š
- æ¥­å‹™æ¨¡çµ„é–€é¢ï¼Œçµ±ä¸€å°å¤–æ¥å£
- å”èª¿å¤šå€‹ Services
- æä¾›çµ±ä¸€çš„ Signal ç‹€æ…‹æ¥å£

**ä¾è³´**ï¼š
- âœ… Services å±¤ï¼ˆå¿…é ˆï¼‰
- âœ… ErrorStateServiceï¼ˆéŒ¯èª¤è™•ç†ï¼‰
- âœ… BlueprintActivityServiceï¼ˆæ´»å‹•è¨˜éŒ„ï¼Œå¦‚éœ€è¦ï¼‰

**é–‹ç™¼æ­¥é©Ÿ**ï¼š

1. **å‰µå»º Facade æ–‡ä»¶**
   ```typescript
   // src/app/core/facades/{feature}.facade.ts
   import { Injectable, inject, signal, computed, effect, OnDestroy } from '@angular/core';
   import { FeatureItemService } from '@shared';
   import { ErrorStateService, BlueprintActivityService } from '@shared';
   import { 
     FeatureItemModel, 
     ItemType,
     CreateItemRequest,
     ItemSummary 
   } from '@shared';
   
   /**
    * Feature Facade
    *
    * {åŠŸèƒ½åç¨±}æ¨¡çµ„é–€é¢ï¼Œçµ±ä¸€å°å¤–æ¥å£
    * å”èª¿ FeatureItemService ç­‰æœå‹™
    */
   @Injectable({ providedIn: 'root' })
   export class FeatureFacade implements OnDestroy {
     private readonly itemService = inject(FeatureItemService);
     private readonly errorState = inject(ErrorStateService);
     private readonly activityService = inject(BlueprintActivityService);
     
     // æš´éœ² Service çš„ç‹€æ…‹ï¼ˆé€šé Facadeï¼‰
     readonly items = this.itemService.items;
     readonly selectedItem = this.itemService.selectedItem;
     readonly loading = this.itemService.loading;
     readonly error = this.itemService.error;
     
     // Facade å±¤çš„ Computed signals
     readonly summary = this.itemService.summary;
     
     // æ¥­å‹™æ–¹æ³•ï¼ˆå§”è¨—çµ¦ Serviceï¼‰
     async loadItems(ownerId: string): Promise<void> {
       try {
         await this.itemService.loadItems(ownerId);
       } catch (error) {
         this.errorState.setError('feature', error);
         throw error;
       }
     }
     
     async createItem(request: CreateItemRequest): Promise<FeatureItemModel> {
       try {
         const item = await this.itemService.createItem(request);
         
         // è¨˜éŒ„æ´»å‹•ï¼ˆå¦‚éœ€è¦ï¼‰
         await this.activityService.logActivity({
           blueprintId: ownerId, // æ ¹æ“šå¯¦éš›æ¥­å‹™èª¿æ•´
           action: 'feature_item_created',
           details: { itemId: item.id },
         });
         
         return item;
       } catch (error) {
         this.errorState.setError('feature', error);
         throw error;
       }
     }
     
     ngOnDestroy(): void {
       // æ¸…ç†è³‡æºï¼ˆå¦‚éœ€è¦ï¼‰
     }
   }
   ```

2. **å°å‡º Facade**
   ```typescript
   // src/app/core/facades/index.ts
   export * from './{feature}.facade';
   ```

3. **åœ¨ core/index.ts ä¸­å°å‡º**
   ```typescript
   // src/app/core/index.ts
   export * from './facades';
   ```

**æª¢æŸ¥æ¸…å–®**ï¼š
- [ ] Facade ä½¿ç”¨ `@Injectable({ providedIn: 'root' })`
- [ ] å”èª¿å¤šå€‹ Servicesï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] æš´éœ²çµ±ä¸€çš„ Signal ç‹€æ…‹æ¥å£
- [ ] æ•´åˆéŒ¯èª¤è™•ç†ï¼ˆErrorStateServiceï¼‰
- [ ] æ•´åˆæ´»å‹•è¨˜éŒ„ï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] æ¥­å‹™æ–¹æ³•å·²å¯¦ç¾
- [ ] Facade å·²æ­£ç¢ºå°å‡º
- [ ] é€šé TypeScript ç·¨è­¯æª¢æŸ¥
- [ ] å–®å…ƒæ¸¬è©¦å·²ç·¨å¯«ï¼ˆå»ºè­° â‰¥80% è¦†è“‹ç‡ï¼‰

---

### ç¬¬ 6 æ­¥ï¼šRoutes/Components å±¤

**å„ªå…ˆç´š**ï¼šP0ï¼ˆä¾è³´ Facades å±¤ï¼‰

**ä½ç½®**ï¼š`src/app/routes/`

**è·è²¬**ï¼š
- UI çµ„ä»¶å¯¦ç¾
- ç”¨æˆ¶äº¤äº’è™•ç†
- è·¯ç”±é…ç½®

**ä¾è³´**ï¼š
- âœ… Facades å±¤ï¼ˆå¿…é ˆï¼‰
- âœ… SHARED_IMPORTSï¼ˆUI çµ„ä»¶ï¼‰

**é–‹ç™¼æ­¥é©Ÿ**ï¼š

1. **å‰µå»ºçµ„ä»¶**
   ```typescript
   // src/app/routes/{feature}/{feature}-list/{feature}-list.component.ts
   import { Component, inject, OnInit } from '@angular/core';
   import { SHARED_IMPORTS } from '@shared';
   import { FeatureFacade } from '@core';
   
   @Component({
     selector: 'app-{feature}-list',
     standalone: true,
     imports: [SHARED_IMPORTS],
     templateUrl: './{feature}-list.component.html',
     styleUrl: './{feature}-list.component.less',
   })
   export class FeatureListComponent implements OnInit {
     private readonly featureFacade = inject(FeatureFacade);
     
     // å¾ Facade ç²å–ç‹€æ…‹
     readonly items = this.featureFacade.items;
     readonly loading = this.featureFacade.loading;
     readonly summary = this.featureFacade.summary;
     
     ngOnInit(): void {
       // åŠ è¼‰æ•¸æ“š
       this.featureFacade.loadItems('owner-id');
     }
   }
   ```

2. **é…ç½®è·¯ç”±**
   ```typescript
   // src/app/routes/{feature}/{feature}.routes.ts
   import { Routes } from '@angular/router';
   
   export const featureRoutes: Routes = [
     {
       path: '',
       loadComponent: () => import('./{feature}-list/{feature}-list.component')
         .then(m => m.FeatureListComponent),
       data: { title: '{åŠŸèƒ½åç¨±}' },
     },
   ];
   ```

**æª¢æŸ¥æ¸…å–®**ï¼š
- [ ] çµ„ä»¶ä½¿ç”¨ Standalone Component
- [ ] ä½¿ç”¨ `SHARED_IMPORTS` å°å…¥æ¨¡çµ„
- [ ] ä½¿ç”¨ `inject()` æ³¨å…¥ Facade
- [ ] å¾ Facade ç²å–ç‹€æ…‹ï¼ˆReadonlySignalï¼‰
- [ ] è·¯ç”±å·²é…ç½®
- [ ] UI/UX ç¬¦åˆè¨­è¨ˆè¦ç¯„
- [ ] éŸ¿æ‡‰å¼è¨­è¨ˆå·²å¯¦ç¾
- [ ] å¯è¨ªå•æ€§è¦æ±‚å·²æ»¿è¶³
- [ ] é€šé TypeScript ç·¨è­¯æª¢æŸ¥

---

### ç¬¬ 7 æ­¥ï¼šæ¸¬è©¦èˆ‡æ–‡æª”

**å„ªå…ˆç´š**ï¼šP0ï¼ˆå¿…é ˆå®Œæˆï¼‰

**é–‹ç™¼æ­¥é©Ÿ**ï¼š

1. **å–®å…ƒæ¸¬è©¦**
   - [ ] Repository æ¸¬è©¦ï¼ˆå¯é¸ï¼Œä½†å»ºè­°ï¼‰
   - [ ] Service æ¸¬è©¦ï¼ˆå¿…é ˆï¼Œâ‰¥80% è¦†è“‹ç‡ï¼‰
   - [ ] Facade æ¸¬è©¦ï¼ˆå¿…é ˆï¼Œâ‰¥80% è¦†è“‹ç‡ï¼‰
   - [ ] Component æ¸¬è©¦ï¼ˆå»ºè­°ï¼‰

2. **é›†æˆæ¸¬è©¦**
   - [ ] ç«¯åˆ°ç«¯æ¸¬è©¦ï¼ˆå¦‚éœ€è¦ï¼‰
   - [ ] API é›†æˆæ¸¬è©¦ï¼ˆå¦‚éœ€è¦ï¼‰

3. **æ–‡æª”**
   - [ ] README æ›´æ–°ï¼ˆå¦‚éœ€è¦ï¼‰
   - [ ] API æ–‡æª”æ›´æ–°ï¼ˆå¦‚éœ€è¦ï¼‰
   - [ ] æ¶æ§‹æ–‡æª”æ›´æ–°ï¼ˆå¦‚éœ€è¦ï¼‰

**æª¢æŸ¥æ¸…å–®**ï¼š
- [ ] æ‰€æœ‰æ¸¬è©¦é€šé
- [ ] æ¸¬è©¦è¦†è“‹ç‡é”æ¨™ï¼ˆâ‰¥80%ï¼‰
- [ ] æ–‡æª”å·²æ›´æ–°
- [ ] ä»£ç¢¼å¯©æŸ¥é€šé

---

## âœ… æª¢æŸ¥æ¸…å–®ï¼ˆä¼æ¥­æ¨™æº–ï¼‰

### é–‹ç™¼å‰æª¢æŸ¥

#### 1. éœ€æ±‚åˆ†æ
- [ ] æ˜ç¢ºåŠŸèƒ½éœ€æ±‚ï¼ˆPRDã€ç”¨æˆ¶æ•…äº‹ï¼‰
- [ ] ç¢ºèªæ¥­å‹™æµç¨‹å’Œè¦å‰‡
- [ ] è­˜åˆ¥ç›¸é—œçš„ç¾æœ‰æ¨¡çµ„å’Œä¾è³´
- [ ] è©•ä¼°è¤‡é›œåº¦å’Œå„ªå…ˆç´š
- [ ] **å¸¸è¦‹åšæ³•æª¢æŸ¥**ï¼šåƒè€ƒé …ç›®ä¸­å·²æœ‰çš„é¡ä¼¼å¯¦ç¾ï¼Œä¿æŒä¸€è‡´æ€§

#### 2. è³‡æ–™åº«è¨­è¨ˆ
- [ ] è¨­è¨ˆè³‡æ–™è¡¨çµæ§‹ï¼ˆå°ç…§ 51 å¼µè¡¨æ¶æ§‹ï¼‰
- [ ] ç¢ºèªæ˜¯å¦éœ€è¦æ–°å¢è³‡æ–™è¡¨
- [ ] è¨­è¨ˆ RLS ç­–ç•¥ï¼ˆåƒè€ƒå®‰å…¨æ–‡æª”ï¼‰
- [ ] æº–å‚™è³‡æ–™åº«é·ç§»è…³æœ¬
- [ ] ä½¿ç”¨ `@SUPABASE` MCP å·¥å…·é©—è­‰è¨­è¨ˆ
- [ ] **ä¼æ¥­æ¨™æº–æª¢æŸ¥**ï¼šè³‡æ–™è¡¨è¨­è¨ˆç¬¦åˆè¦ç¯„ï¼ŒRLS ç­–ç•¥å®Œæ•´

#### 3. æ¶æ§‹è¦åŠƒ
- [ ] ç¢ºèªåŠŸèƒ½å±¬æ–¼å“ªå€‹æ¥­å‹™æ¨¡çµ„ï¼ˆ11 å€‹æ¨¡çµ„ä¹‹ä¸€ï¼‰
- [ ] è¦åŠƒéœ€è¦å“ªäº›å±¤ç´šï¼ˆTypesã€Repositoriesã€Modelsã€Servicesã€Facadesï¼‰
- [ ] ç¢ºèªèˆ‡ç¾æœ‰æ¨¡çµ„çš„æ•´åˆé»
- [ ] è¨­è¨ˆ API ä»‹é¢ï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] **é‚è¼¯ä¸€è‡´æ€§æª¢æŸ¥**ï¼šæ¶æ§‹è¦åŠƒç¬¦åˆåˆ†å±¤æ¶æ§‹åŸå‰‡ï¼Œä¾è³´é—œä¿‚æ¸…æ™°

#### 4. é–‹ç™¼æº–å‚™
- [ ] åˆ†æ”¯å·²å‰µå»ºï¼ˆéµå¾ªåˆ†æ”¯å‘½åè¦ç¯„ï¼‰
- [ ] é–‹ç™¼ç’°å¢ƒå·²æº–å‚™
- [ ] ç›¸é—œæ–‡æª”å·²é–±è®€

---

### é–‹ç™¼ä¸­æª¢æŸ¥ï¼ˆæŒ‰é–‹ç™¼é †åºï¼‰

#### ç¬¬ 1 æ­¥ï¼šTypes å±¤æª¢æŸ¥

**å®Œæˆæ¨™æº–**ï¼š
- [ ] ä½¿ç”¨ Supabase MCP ç”Ÿæˆ/æ›´æ–° `database.types.ts`ï¼ˆå¦‚éœ€è¦æ–°è¡¨ï¼‰
- [ ] å‰µå»ºæ¥­å‹™æ¨¡çµ„é¡å‹æ–‡ä»¶ `{feature}.types.ts`ï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] é¡å‹å®šç¾©å®Œæ•´ï¼Œèˆ‡è³‡æ–™åº«çµæ§‹ä¸€è‡´
- [ ] é¡å‹å·²æ­£ç¢ºå°å‡ºï¼ˆåœ¨ `core/infra/types/index.ts` ä¸­ï¼‰
- [ ] é€šé TypeScript ç·¨è­¯æª¢æŸ¥ï¼ˆ`yarn type-check`ï¼‰

**ä¼æ¥­æ¨™æº–æª¢æŸ¥**ï¼š
- [ ] **å¸¸è¦‹åšæ³•**ï¼šé¡å‹å®šç¾©éµå¾ª TypeScript æœ€ä½³å¯¦è¸
- [ ] **ä¼æ¥­æ¨™æº–**ï¼šé¡å‹å®šç¾©å®Œæ•´ï¼Œç„¡ `any` é¡å‹ï¼ˆé™¤éå¿…è¦ï¼‰
- [ ] **é‚è¼¯ä¸€è‡´æ€§**ï¼šé¡å‹å‘½åèªç¾©åŒ–ï¼Œèˆ‡è³‡æ–™åº«å­—æ®µå°æ‡‰
- [ ] **ç¬¦åˆå¸¸ç†**ï¼šé¡å‹å®šç¾©å¯ç”¨ï¼Œç·¨è­¯ç„¡éŒ¯èª¤

---

#### ç¬¬ 2 æ­¥ï¼šRepositories å±¤æª¢æŸ¥

**å®Œæˆæ¨™æº–**ï¼š
- [ ] Repository ç¹¼æ‰¿è‡ª `BaseRepository`
- [ ] `tableName` å·²æ­£ç¢ºè¨­ç½®ï¼ˆsnake_caseï¼‰
- [ ] é¡å‹åƒæ•¸æ­£ç¢ºï¼ˆEntity, Insert, Updateï¼‰
- [ ] ç‰¹å®šæŸ¥è©¢æ–¹æ³•å·²å¯¦ç¾ï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] Repository å·²æ­£ç¢ºå°å‡ºï¼ˆåœ¨ `core/infra/repositories/index.ts` ä¸­ï¼‰
- [ ] é€šé TypeScript ç·¨è­¯æª¢æŸ¥

**ä¼æ¥­æ¨™æº–æª¢æŸ¥**ï¼š
- [ ] **å¸¸è¦‹åšæ³•**ï¼šéµå¾ª Repository æ¨¡å¼ï¼Œåƒè€ƒç¾æœ‰ Repository å¯¦ç¾
- [ ] **ä¼æ¥­æ¨™æº–**ï¼šä»£ç¢¼çµæ§‹æ¸…æ™°ï¼Œè·è²¬åˆ†é›¢æ˜ç¢ºï¼ˆåªè² è²¬æ•¸æ“šè¨ªå•ï¼‰
- [ ] **é‚è¼¯ä¸€è‡´æ€§**ï¼šæŸ¥è©¢æ–¹æ³•å‘½åèªç¾©åŒ–ï¼Œåƒæ•¸é¡å‹æ­£ç¢º
- [ ] **ç¬¦åˆå¸¸ç†**ï¼šåŸºæœ¬ CRUD æ“ä½œå¯ç”¨ï¼ŒæŸ¥è©¢æ–¹æ³•æ­£ç¢º

---

#### ç¬¬ 3 æ­¥ï¼šModels å±¤æª¢æŸ¥ï¼ˆå¯èˆ‡ Repositories ä¸¦è¡Œï¼‰

**å®Œæˆæ¨™æº–**ï¼š
- [ ] Models æ–‡ä»¶å·²å‰µå»º `{feature}.models.ts`
- [ ] å¾ Types å±¤æ­£ç¢ºæå–é¡å‹
- [ ] æ¥­å‹™ç›¸é—œæšèˆ‰å’Œé¡å‹å·²å®šç¾©
- [ ] æ¥­å‹™ç›¸é—œæ¥å£å·²å®šç¾©
- [ ] Models å·²æ­£ç¢ºå°å‡ºï¼ˆåœ¨ `shared/models/index.ts` ä¸­ï¼‰
- [ ] é€šé TypeScript ç·¨è­¯æª¢æŸ¥

**ä¼æ¥­æ¨™æº–æª¢æŸ¥**ï¼š
- [ ] **å¸¸è¦‹åšæ³•**ï¼šåƒè€ƒç¾æœ‰ Models æ–‡ä»¶çµæ§‹
- [ ] **ä¼æ¥­æ¨™æº–**ï¼šæ¨¡å‹å®šç¾©å®Œæ•´ï¼Œæšèˆ‰å€¼æ˜ç¢º
- [ ] **é‚è¼¯ä¸€è‡´æ€§**ï¼šæ¨¡å‹å‘½åèªç¾©åŒ–ï¼Œèˆ‡æ¥­å‹™é‚è¼¯å°æ‡‰
- [ ] **ç¬¦åˆå¸¸ç†**ï¼šæ¨¡å‹å®šç¾©å¯ç”¨ï¼Œé¡å‹æ­£ç¢º

---

#### ç¬¬ 4 æ­¥ï¼šServices å±¤æª¢æŸ¥

**å®Œæˆæ¨™æº–**ï¼š
- [ ] Service ä½¿ç”¨ `@Injectable({ providedIn: 'root' })`
- [ ] ä½¿ç”¨ `inject()` é€²è¡Œä¾è³´æ³¨å…¥
- [ ] ä½¿ç”¨ Signals ç®¡ç†ç‹€æ…‹ï¼ˆ`signal()`, `computed()`ï¼‰
- [ ] æš´éœ² `ReadonlySignal` çµ¦çµ„ä»¶
- [ ] æ¥­å‹™é‚è¼¯æ–¹æ³•å·²å¯¦ç¾
- [ ] éŒ¯èª¤è™•ç†å·²å¯¦ç¾ï¼ˆtry-catchï¼ŒéŒ¯èª¤ç‹€æ…‹ç®¡ç†ï¼‰
- [ ] Loading ç‹€æ…‹ç®¡ç†å·²å¯¦ç¾
- [ ] Service å·²æ­£ç¢ºå°å‡ºï¼ˆåœ¨ `shared/services/{feature}/index.ts` ä¸­ï¼‰
- [ ] é€šé TypeScript ç·¨è­¯æª¢æŸ¥

**ä¼æ¥­æ¨™æº–æª¢æŸ¥**ï¼š
- [ ] **å¸¸è¦‹åšæ³•**ï¼šéµå¾ª Angular 20 ç¾ä»£èªæ³•ï¼Œåƒè€ƒç¾æœ‰ Service å¯¦ç¾
- [ ] **ä¼æ¥­æ¨™æº–**ï¼š
  - [ ] ä»£ç¢¼çµæ§‹æ¸…æ™°ï¼Œè·è²¬åˆ†é›¢æ˜ç¢ºï¼ˆæ¥­å‹™é‚è¼¯è™•ç†ï¼‰
  - [ ] éŒ¯èª¤è™•ç†å®Œå–„ï¼ˆæ‰€æœ‰ç•°æ­¥æ“ä½œéƒ½æœ‰éŒ¯èª¤è™•ç†ï¼‰
  - [ ] ç‹€æ…‹ç®¡ç†è¦ç¯„ï¼ˆä½¿ç”¨ Signalsï¼Œé¿å…å…¨å±€ç‹€æ…‹æ±¡æŸ“ï¼‰
  - [ ] æ¸¬è©¦è¦†è“‹å®Œæ•´ï¼ˆé—œéµæ¥­å‹™é‚è¼¯æœ‰å–®å…ƒæ¸¬è©¦ï¼Œâ‰¥80% è¦†è“‹ç‡ï¼‰
- [ ] **é‚è¼¯ä¸€è‡´æ€§**ï¼š
  - [ ] æ•¸æ“šæµæ¸…æ™°ï¼ˆService â†’ Repository â†’ Databaseï¼‰
  - [ ] å‘½åèªç¾©åŒ–ï¼ˆæ–¹æ³•åæ¸…æ¥šè¡¨é”æ„åœ–ï¼‰
  - [ ] ç‹€æ…‹æ›´æ–°æ™‚æ©Ÿæ­£ç¢ºï¼ˆloading ç‹€æ…‹é…å°è¨­ç½®å’Œæ¸…é™¤ï¼‰
- [ ] **ç¬¦åˆå¸¸ç†**ï¼š
  - [ ] åŠŸèƒ½çœŸæ­£å¯ç”¨ï¼ˆä¸æ˜¯"çœ‹èµ·ä¾†å®Œæˆ"ï¼‰
  - [ ] éŒ¯èª¤æç¤ºç”¨æˆ¶å‹å¥½
  - [ ] ç‹€æ…‹ç®¡ç†æ­£ç¢ºï¼ˆä¸æœƒå°è‡´ç„¡é™åŠ è¼‰ç­‰å•é¡Œï¼‰

---

#### ç¬¬ 5 æ­¥ï¼šFacades å±¤æª¢æŸ¥

**å®Œæˆæ¨™æº–**ï¼š
- [ ] Facade ä½¿ç”¨ `@Injectable({ providedIn: 'root' })`
- [ ] å”èª¿å¤šå€‹ Servicesï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] æš´éœ²çµ±ä¸€çš„ Signal ç‹€æ…‹æ¥å£
- [ ] æ•´åˆéŒ¯èª¤è™•ç†ï¼ˆErrorStateServiceï¼‰
- [ ] æ•´åˆæ´»å‹•è¨˜éŒ„ï¼ˆå¦‚éœ€è¦ï¼ŒBlueprintActivityServiceï¼‰
- [ ] æ¥­å‹™æ–¹æ³•å·²å¯¦ç¾ï¼ˆå§”è¨—çµ¦ Serviceï¼‰
- [ ] Facade å·²æ­£ç¢ºå°å‡ºï¼ˆåœ¨ `core/facades/index.ts` ä¸­ï¼‰
- [ ] é€šé TypeScript ç·¨è­¯æª¢æŸ¥

**ä¼æ¥­æ¨™æº–æª¢æŸ¥**ï¼š
- [ ] **å¸¸è¦‹åšæ³•**ï¼šéµå¾ª Facade æ¨¡å¼ï¼Œåƒè€ƒç¾æœ‰ Facade å¯¦ç¾
- [ ] **ä¼æ¥­æ¨™æº–**ï¼š
  - [ ] ä»£ç¢¼çµæ§‹æ¸…æ™°ï¼Œè·è²¬åˆ†é›¢æ˜ç¢ºï¼ˆçµ±ä¸€å°å¤–æ¥å£ï¼‰
  - [ ] éŒ¯èª¤è™•ç†å®Œå–„ï¼ˆæ•´åˆ ErrorStateServiceï¼‰
  - [ ] ç‹€æ…‹ç®¡ç†è¦ç¯„ï¼ˆæš´éœ² ReadonlySignalï¼‰
- [ ] **é‚è¼¯ä¸€è‡´æ€§**ï¼š
  - [ ] æ•¸æ“šæµæ¸…æ™°ï¼ˆFacade â†’ Service â†’ Repositoryï¼‰
  - [ ] å‘½åèªç¾©åŒ–ï¼ˆæ–¹æ³•åæ¸…æ¥šè¡¨é”æ„åœ–ï¼‰
- [ ] **ç¬¦åˆå¸¸ç†**ï¼š
  - [ ] åŠŸèƒ½çœŸæ­£å¯ç”¨
  - [ ] æ¥å£çµ±ä¸€ï¼Œæ˜“æ–¼ä½¿ç”¨

---

#### ç¬¬ 6 æ­¥ï¼šRoutes/Components å±¤æª¢æŸ¥

**å®Œæˆæ¨™æº–**ï¼š
- [ ] çµ„ä»¶ä½¿ç”¨ Standalone Component
- [ ] ä½¿ç”¨ `SHARED_IMPORTS` å°å…¥æ¨¡çµ„
- [ ] ä½¿ç”¨ `inject()` æ³¨å…¥ Facade
- [ ] å¾ Facade ç²å–ç‹€æ…‹ï¼ˆReadonlySignalï¼‰
- [ ] è·¯ç”±å·²é…ç½®ï¼ˆæ‡¶åŠ è¼‰ï¼‰
- [ ] UI/UX ç¬¦åˆè¨­è¨ˆè¦ç¯„
- [ ] éŸ¿æ‡‰å¼è¨­è¨ˆå·²å¯¦ç¾
- [ ] å¯è¨ªå•æ€§è¦æ±‚å·²æ»¿è¶³ï¼ˆWCAG 2.1 AAï¼‰
- [ ] é€šé TypeScript ç·¨è­¯æª¢æŸ¥

**ä¼æ¥­æ¨™æº–æª¢æŸ¥**ï¼š
- [ ] **å¸¸è¦‹åšæ³•**ï¼š
  - [ ] éµå¾ª Angular 20 ç¾ä»£èªæ³•ï¼ˆStandalone Componentsï¼‰
  - [ ] ä½¿ç”¨ SHARED_IMPORTSï¼Œé¿å…ç¢ç‰‡åŒ–å°å…¥
  - [ ] UI/UX ç¬¦åˆå¸¸è¦ï¼ˆåˆ—è¡¨é åªæŸ¥çœ‹ï¼Œè©³æƒ…é ç·¨è¼¯åˆªé™¤ï¼‰
- [ ] **ä¼æ¥­æ¨™æº–**ï¼š
  - [ ] ä»£ç¢¼çµæ§‹æ¸…æ™°ï¼Œè·è²¬åˆ†é›¢æ˜ç¢ºï¼ˆUI å±•ç¤ºå’Œç”¨æˆ¶äº¤äº’ï¼‰
  - [ ] éŒ¯èª¤è™•ç†å®Œå–„ï¼ˆé¡¯ç¤ºéŒ¯èª¤æç¤ºï¼‰
  - [ ] ç‹€æ…‹ç®¡ç†è¦ç¯„ï¼ˆå¾ Facade ç²å–ç‹€æ…‹ï¼Œä¸ç›´æ¥ä¿®æ”¹ï¼‰
- [ ] **é‚è¼¯ä¸€è‡´æ€§**ï¼š
  - [ ] æ•¸æ“šæµæ¸…æ™°ï¼ˆComponent â†’ Facade â†’ Serviceï¼‰
  - [ ] å‘½åèªç¾©åŒ–ï¼ˆçµ„ä»¶åæ¸…æ¥šè¡¨é”æ„åœ–ï¼‰
  - [ ] çµ„ä»¶åˆå§‹åŒ–é †åºæ­£ç¢ºï¼ˆå„ªå…ˆåŠ è¼‰ä¸»è¦åŠŸèƒ½ï¼‰
- [ ] **ç¬¦åˆå¸¸ç†**ï¼š
  - [ ] åŠŸèƒ½çœŸæ­£å¯ç”¨ï¼ˆä¸æ˜¯"çœ‹èµ·ä¾†å®Œæˆ"ï¼‰
  - [ ] ç”¨æˆ¶é«”é©—è‰¯å¥½ï¼ˆç¬¦åˆä½¿ç”¨ç¿’æ…£ï¼‰
  - [ ] é¿å…éåº¦è¨­è¨ˆï¼ˆç°¡å–®æœ‰æ•ˆçš„æ–¹æ¡ˆï¼‰

---

#### ç¬¬ 7 æ­¥ï¼šæ¸¬è©¦èˆ‡æ–‡æª”æª¢æŸ¥

**å®Œæˆæ¨™æº–**ï¼š
- [ ] å–®å…ƒæ¸¬è©¦å·²ç·¨å¯«ï¼ˆRepositoryã€Serviceã€Facadeï¼‰
- [ ] æ¸¬è©¦è¦†è“‹ç‡é”æ¨™ï¼ˆâ‰¥80% æœå‹™å±¤ï¼Œ100% é—œéµæ¥­å‹™é‚è¼¯ï¼‰
- [ ] æ‰€æœ‰æ¸¬è©¦é€šéï¼ˆ`yarn test`ï¼‰
- [ ] æ–‡æª”å·²æ›´æ–°ï¼ˆREADMEã€API æ–‡æª”ã€æ¶æ§‹æ–‡æª”ï¼‰

**ä¼æ¥­æ¨™æº–æª¢æŸ¥**ï¼š
- [ ] **å¸¸è¦‹åšæ³•**ï¼šéµå¾ªæ¸¬è©¦æœ€ä½³å¯¦è¸ï¼Œåƒè€ƒç¾æœ‰æ¸¬è©¦å¯¦ç¾
- [ ] **ä¼æ¥­æ¨™æº–**ï¼šæ¸¬è©¦è¦†è“‹å®Œæ•´ï¼Œé—œéµæ¥­å‹™é‚è¼¯å¿…é ˆæœ‰å–®å…ƒæ¸¬è©¦
- [ ] **é‚è¼¯ä¸€è‡´æ€§**ï¼šæ¸¬è©¦ç”¨ä¾‹å®Œæ•´ï¼Œè¦†è“‹æ­£å¸¸æµç¨‹å’Œç•°å¸¸æµç¨‹
- [ ] **ç¬¦åˆå¸¸ç†**ï¼šæ¸¬è©¦çœŸæ­£é©—è­‰åŠŸèƒ½ï¼Œæ–‡æª”èˆ‡ä»£ç¢¼ä¸€è‡´

---

### é–‹ç™¼å¾Œæª¢æŸ¥ï¼ˆå®Œæ•´é©—è­‰æµç¨‹ï¼‰

#### 1. ä»£ç¢¼è³ªé‡æª¢æŸ¥

- [ ] **é¡å‹æª¢æŸ¥**ï¼šæ‰€æœ‰å±¤ç´šé€šé TypeScript ç·¨è­¯ï¼ˆ`yarn type-check`ï¼‰
- [ ] **ä»£ç¢¼æª¢æŸ¥**ï¼šæ‰€æœ‰å±¤ç´šé€šé ESLint æª¢æŸ¥ï¼ˆ`yarn lint`ï¼‰
- [ ] **æ¨£å¼æª¢æŸ¥**ï¼šæ‰€æœ‰å±¤ç´šé€šé Stylelint æª¢æŸ¥ï¼ˆ`yarn lint:style`ï¼‰
- [ ] **æ§‹å»ºæª¢æŸ¥**ï¼šé …ç›®æ§‹å»ºæˆåŠŸï¼ˆ`yarn build`ï¼‰

#### 2. åŠŸèƒ½é©—è­‰

- [ ] **å–®å…ƒæ¸¬è©¦**ï¼šæ‰€æœ‰æ¸¬è©¦é€šéï¼ˆ`yarn test`ï¼‰
- [ ] **é‹è¡Œæ™‚æª¢æŸ¥**ï¼šå•Ÿå‹•é–‹ç™¼æœå‹™å™¨ï¼ŒåŠŸèƒ½åœ¨ç€è¦½å™¨ä¸­æ­£å¸¸å·¥ä½œ
- [ ] **é›†æˆæ¸¬è©¦**ï¼šèˆ‡ç›¸é—œæ¨¡çµ„çš„é›†æˆæ¸¬è©¦é€šéï¼ˆå¦‚éœ€è¦ï¼‰

#### 3. ä¼æ¥­æ¨™æº–æœ€çµ‚æª¢æŸ¥

- [ ] **å¸¸è¦‹åšæ³•æª¢æŸ¥**ï¼š
  - [ ] æ˜¯å¦ç¬¦åˆ Angular/TypeScript/ng-alain æœ€ä½³å¯¦è¸ï¼Ÿ
  - [ ] æ˜¯å¦åƒè€ƒäº†é …ç›®ä¸­å·²æœ‰çš„é¡ä¼¼å¯¦ç¾ï¼Ÿ
  - [ ] UI/UX æ˜¯å¦ç¬¦åˆå¸¸è¦ï¼Ÿ
  - [ ] æ˜¯å¦é¿å…äº†ä¸å¿…è¦çš„å‰µæ–°ï¼Ÿ

- [ ] **ä¼æ¥­æ¨™æº–æª¢æŸ¥**ï¼š
  - [ ] ä»£ç¢¼çµæ§‹æ˜¯å¦æ¸…æ™°ï¼ˆåˆ†å±¤æ¶æ§‹ã€ä¾è³´æ–¹å‘ï¼‰ï¼Ÿ
  - [ ] è·è²¬åˆ†é›¢æ˜¯å¦æ˜ç¢ºï¼ˆå–®ä¸€è·è²¬åŸå‰‡ï¼‰ï¼Ÿ
  - [ ] éŒ¯èª¤è™•ç†æ˜¯å¦å®Œå–„ï¼ˆæ‰€æœ‰ç•°æ­¥æ“ä½œéƒ½æœ‰éŒ¯èª¤è™•ç†ï¼‰ï¼Ÿ
  - [ ] ç‹€æ…‹ç®¡ç†æ˜¯å¦è¦ç¯„ï¼ˆä½¿ç”¨ Signalsï¼Œé¿å…å…¨å±€ç‹€æ…‹æ±¡æŸ“ï¼‰ï¼Ÿ
  - [ ] æ¸¬è©¦è¦†è“‹æ˜¯å¦å®Œæ•´ï¼ˆâ‰¥80% æœå‹™å±¤ï¼Œ100% é—œéµæ¥­å‹™é‚è¼¯ï¼‰ï¼Ÿ

- [ ] **é‚è¼¯ä¸€è‡´æ€§æª¢æŸ¥**ï¼š
  - [ ] æ•¸æ“šæµæ˜¯å¦æ¸…æ™°ï¼ˆComponent â†’ Facade â†’ Service â†’ Repositoryï¼‰ï¼Ÿ
  - [ ] å‘½åæ˜¯å¦èªç¾©åŒ–ï¼ˆèƒ½æ¸…æ¥šè¡¨é”æ„åœ–ï¼‰ï¼Ÿ
  - [ ] æ¢ä»¶åˆ¤æ–·æ˜¯å¦åˆç†ï¼ˆé¿å…è¤‡é›œåµŒå¥—ï¼‰ï¼Ÿ
  - [ ] çµ„ä»¶åˆå§‹åŒ–é †åºæ˜¯å¦æ­£ç¢ºï¼ˆå„ªå…ˆåŠ è¼‰ä¸»è¦åŠŸèƒ½ï¼‰ï¼Ÿ
  - [ ] ç‹€æ…‹æ›´æ–°æ™‚æ©Ÿæ˜¯å¦æ­£ç¢ºï¼Ÿ

- [ ] **å¸¸ç†æª¢æŸ¥**ï¼š
  - [ ] åŠŸèƒ½æ˜¯å¦çœŸæ­£å¯ç”¨ï¼ˆä¸æ˜¯"çœ‹èµ·ä¾†å®Œæˆ"ï¼‰ï¼Ÿ
  - [ ] ç”¨æˆ¶é«”é©—æ˜¯å¦è‰¯å¥½ï¼ˆç¬¦åˆä½¿ç”¨ç¿’æ…£ï¼‰ï¼Ÿ
  - [ ] æ˜¯å¦é¿å…äº†éåº¦è¨­è¨ˆï¼ˆç°¡å–®æœ‰æ•ˆçš„æ–¹æ¡ˆï¼‰ï¼Ÿ
  - [ ] æ˜¯å¦åŠæ™‚é©—è­‰ï¼ˆæ§‹å»ºæª¢æŸ¥ã€é‹è¡Œæ™‚æª¢æŸ¥ï¼‰ï¼Ÿ
  - [ ] æ–‡æª”èˆ‡ä»£ç¢¼æ˜¯å¦ä¸€è‡´ï¼Ÿ

#### 4. æ–‡æª”æ›´æ–°

- [ ] README å·²æ›´æ–°ï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] API æ–‡æª”å·²æ›´æ–°ï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] æ¶æ§‹æ–‡æª”å·²æ›´æ–°ï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] è³‡æ–™åº«æ–‡æª”å·²æ›´æ–°ï¼ˆå¦‚éœ€è¦æ–°è¡¨ï¼‰

#### 5. ä»£ç¢¼å¯©æŸ¥

- [ ] ä»£ç¢¼å¯©æŸ¥é€šé
- [ ] æ‰€æœ‰åé¥‹å·²è™•ç†
- [ ] ä»£ç¢¼å·²åˆä½µåˆ°ä¸»åˆ†æ”¯

---

### âš ï¸ é‡è¦æé†’

**å¦‚æœä»»ä½•ä¸€é …æª¢æŸ¥ä¸é€šéï¼Œå¿…é ˆä¿®å¾©å¾Œæ‰èƒ½æ¨™è¨˜ç‚ºå®Œæˆã€‚**

**å››å€‹æ ¸å¿ƒåŸå‰‡å¿…é ˆå…¨éƒ¨æ»¿è¶³**ï¼š
1. âœ… å¸¸è¦‹åšæ³•ï¼ˆCommon Practicesï¼‰
2. âœ… ä¼æ¥­æ¨™æº–ï¼ˆEnterprise Standardsï¼‰
3. âœ… ç¬¦åˆé‚è¼¯ï¼ˆLogical Consistencyï¼‰
4. âœ… ç¬¦åˆå¸¸ç†ï¼ˆCommon Senseï¼‰

---

## ğŸ“¦ æ–°åŠŸèƒ½æ¨¡çµ„é–‹ç™¼ç¤ºä¾‹

### é€šç”¨é–‹ç™¼æµç¨‹ç¤ºä¾‹

å‡è¨­è¦é–‹ç™¼ä¸€å€‹æ–°çš„æ¥­å‹™æ¨¡çµ„ï¼ˆä¾‹å¦‚ï¼šè²¡å‹™ã€åº«å­˜ã€å ±è¡¨ç­‰ï¼‰ï¼Œä»¥ä¸‹æ˜¯å®Œæ•´çš„é–‹ç™¼æµç¨‹ï¼š

#### 1. è³‡æ–™åº«è¨­è¨ˆï¼ˆå¦‚éœ€è¦æ–°è¡¨ï¼‰

```sql
-- ç¤ºä¾‹ï¼šæ–°æ¥­å‹™è¡¨
CREATE TABLE new_feature_items (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name VARCHAR(255) NOT NULL,
  status VARCHAR(20) NOT NULL DEFAULT 'active',
  created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
  created_by UUID REFERENCES accounts(id),
  updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);
```

#### 2. é–‹ç™¼é †åºï¼ˆé€šç”¨æµç¨‹ï¼‰

```
ç¬¬ 1 æ­¥ï¼šTypes å±¤
  - ä½¿ç”¨ Supabase MCP ç”Ÿæˆ/æ›´æ–° database.types.tsï¼ˆåŒ…å«æ–°è¡¨ï¼‰
  - å‰µå»º {feature}.types.tsï¼ˆæ¥­å‹™é¡å‹å®šç¾©ï¼Œå¦‚éœ€è¦ï¼‰

ç¬¬ 2 æ­¥ï¼šRepositories å±¤
  - å‰µå»º {Feature}Repositoryï¼ˆç¹¼æ‰¿ BaseRepositoryï¼‰
  - å¯¦ç¾åŸºæœ¬ CRUD å’Œç‰¹å®šæŸ¥è©¢æ–¹æ³•

ç¬¬ 3 æ­¥ï¼šModels å±¤ï¼ˆå¯èˆ‡ Repositories ä¸¦è¡Œï¼‰
  - å‰µå»º {feature}.models.ts
  - å®šç¾©æ¥­å‹™ç›¸é—œæšèˆ‰å’Œé¡å‹
  - å®šç¾©æ¥­å‹™ç›¸é—œæ¥å£

ç¬¬ 4 æ­¥ï¼šServices å±¤
  - å‰µå»º {Feature}Service
  - å¯¦ç¾æ¥­å‹™é‚è¼¯
  - ä½¿ç”¨ Signals ç®¡ç†ç‹€æ…‹

ç¬¬ 5 æ­¥ï¼šFacades å±¤
  - å‰µå»º {Feature}Facade
  - å”èª¿ç›¸é—œ Services
  - æä¾›çµ±ä¸€çš„å°å¤–æ¥å£

ç¬¬ 6 æ­¥ï¼šRoutes/Components å±¤
  - å‰µå»º {Feature}ListComponent
  - å‰µå»º {Feature}DetailComponentï¼ˆå¦‚éœ€è¦ï¼‰
  - é…ç½®è·¯ç”±

ç¬¬ 7 æ­¥ï¼šæ¸¬è©¦èˆ‡æ–‡æª”
  - ç·¨å¯«å–®å…ƒæ¸¬è©¦
  - æ›´æ–°æ–‡æª”
```

#### 3. æ–‡ä»¶çµæ§‹ï¼ˆé€šç”¨æ¨¡æ¿ï¼‰

```
src/app/
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ infra/
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â”œâ”€â”€ database.types.ts (æ›´æ–°ï¼Œå¦‚éœ€è¦)
â”‚   â”‚   â”‚   â””â”€â”€ {feature}.types.ts (æ–°å¢ï¼Œå¦‚éœ€è¦)
â”‚   â”‚   â””â”€â”€ repositories/
â”‚   â”‚       â””â”€â”€ {feature}-item.repository.ts (æ–°å¢)
â”‚   â””â”€â”€ facades/
â”‚       â””â”€â”€ {feature}.facade.ts (æ–°å¢)
â”œâ”€â”€ shared/
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â””â”€â”€ {feature}.models.ts (æ–°å¢)
â”‚   â””â”€â”€ services/
â”‚       â””â”€â”€ {feature}/
â”‚           â””â”€â”€ {feature}-item.service.ts (æ–°å¢)
â””â”€â”€ routes/
    â””â”€â”€ {feature}/
        â”œâ”€â”€ {feature}-list/
        â”‚   â””â”€â”€ {feature}-list.component.ts (æ–°å¢)
        â””â”€â”€ {feature}.routes.ts (æ–°å¢)
```

**å‘½åè¦ç¯„**ï¼š
- `{feature}` æ›¿æ›ç‚ºå¯¦éš›åŠŸèƒ½åç¨±ï¼ˆå¦‚ï¼šfinanceã€inventoryã€reportï¼‰
- ä½¿ç”¨ kebab-case å‘½åæ–‡ä»¶
- ä½¿ç”¨ PascalCase å‘½åé¡å’Œæ¥å£

#### 4. é–‹ç™¼æª¢æŸ¥é»

æ¯å€‹æ­¥é©Ÿå®Œæˆå¾Œï¼Œæª¢æŸ¥ï¼š

- [ ] **Types å±¤**ï¼šé¡å‹å®šç¾©å®Œæ•´ï¼Œé€šé `yarn type-check`
- [ ] **Repositories å±¤**ï¼šRepository ç¹¼æ‰¿ BaseRepositoryï¼ŒåŸºæœ¬ CRUD å¯ç”¨
- [ ] **Models å±¤**ï¼šæ¥­å‹™æ¨¡å‹å’Œæšèˆ‰å®šç¾©å®Œæ•´
- [ ] **Services å±¤**ï¼šæ¥­å‹™é‚è¼¯å¯¦ç¾ï¼ŒSignals ç‹€æ…‹ç®¡ç†æ­£ç¢º
- [ ] **Facades å±¤**ï¼šå”èª¿ Servicesï¼Œæä¾›çµ±ä¸€æ¥å£
- [ ] **Routes/Components å±¤**ï¼šUI çµ„ä»¶å¯¦ç¾ï¼Œè·¯ç”±é…ç½®æ­£ç¢º
- [ ] **æ¸¬è©¦èˆ‡æ–‡æª”**ï¼šæ¸¬è©¦é€šéï¼Œæ–‡æª”æ›´æ–°

#### 5. é©ç”¨å ´æ™¯

æ­¤é–‹ç™¼é †åºé©ç”¨æ–¼ï¼š

- âœ… æ–°æ¥­å‹™æ¨¡çµ„ï¼ˆè²¡å‹™ã€åº«å­˜ã€å ±è¡¨ç­‰ï¼‰
- âœ… æ“´å±•ç¾æœ‰æ¨¡çµ„åŠŸèƒ½
- âœ… æ–°å¢è³‡æ–™è¡¨ç›¸é—œåŠŸèƒ½
- âœ… é‡æ§‹ç¾æœ‰åŠŸèƒ½æ¨¡çµ„

**ä¸é©ç”¨æ–¼**ï¼š
- âŒ ç´” UI çµ„ä»¶ï¼ˆä¸éœ€è¦è³‡æ–™åº«æ“ä½œï¼‰
- âŒ å·¥å…·å‡½æ•¸æˆ–å·¥å…·é¡
- âŒ é…ç½®é¡æ–‡ä»¶

---

## ğŸ“š ç›¸é—œæ–‡æª”

- [æ¶æ§‹å±¤ç´šå®Œæ•´æ€§æª¢æŸ¥å ±å‘Š](./æ¶æ§‹å±¤ç´šå®Œæ•´æ€§æª¢æŸ¥å ±å‘Š-2025-01-15.md)
- [æ¶æ§‹ä¾è³´é—œä¿‚æª¢æŸ¥å ±å‘Š](./æ¶æ§‹ä¾è³´é—œä¿‚æª¢æŸ¥å ±å‘Š-2025-01-19.md)
- [é–‹ç™¼å·¥ä½œæµç¨‹](./28-é–‹ç™¼å·¥ä½œæµç¨‹.md)
- [API è¨­è¨ˆè¦ç¯„](../../.cursor/rules/api-design.mdc)
- [éŒ¯èª¤è™•ç†è¦ç¯„](../../.cursor/rules/error-handling.mdc)

---

**æœ€å¾Œæ›´æ–°**ï¼š2025-01-19  
**ç¶­è­·è€…**ï¼šé–‹ç™¼åœ˜éšŠ
