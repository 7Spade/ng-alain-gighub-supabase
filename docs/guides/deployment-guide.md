# éƒ¨ç½²æŒ‡å—


> **ğŸ“š ç›®çš„**: æä¾›å®Œæ•´çš„éƒ¨ç½²æµç¨‹èˆ‡æœ€ä½³å¯¦è¸ï¼Œç¢ºä¿æ‡‰ç”¨ç¨‹å¼å®‰å…¨ã€ç©©å®šåœ°ç™¼ä½ˆåˆ°ç”Ÿç”¢ç’°å¢ƒ

## ç›®æ¨™è®€è€… (Audience)

- DevOps å·¥ç¨‹å¸«
- ç³»çµ±ç®¡ç†å“¡
- æŠ€è¡“ä¸»ç®¡

---


## ğŸ“‘ ç›®éŒ„

- [ğŸ“‹ ç›®éŒ„](#-ç›®éŒ„)
- [éƒ¨ç½²æ¦‚è¿°](#éƒ¨ç½²æ¦‚è¿°)
  - [éƒ¨ç½²æ¶æ§‹](#éƒ¨ç½²æ¶æ§‹)
  - [éƒ¨ç½²ç’°å¢ƒ](#éƒ¨ç½²ç’°å¢ƒ)
- [éƒ¨ç½²å‰æº–å‚™](#éƒ¨ç½²å‰æº–å‚™)
  - [1. æª¢æŸ¥æ¸…å–®](#1-æª¢æŸ¥æ¸…å–®)
  - [2. ç’°å¢ƒè®Šæ•¸æª¢æŸ¥](#2-ç’°å¢ƒè®Šæ•¸æª¢æŸ¥)
  - [3. å»ºç½®æ¸¬è©¦](#3-å»ºç½®æ¸¬è©¦)
- [ç”Ÿç”¢ç’°å¢ƒé…ç½®](#ç”Ÿç”¢ç’°å¢ƒé…ç½®)
  - [1. Supabase å°ˆæ¡ˆè¨­å®š](#1-supabase-å°ˆæ¡ˆè¨­å®š)
  - [2. ç’°å¢ƒè®Šæ•¸ç®¡ç†](#2-ç’°å¢ƒè®Šæ•¸ç®¡ç†)
- [å»ºç½®æµç¨‹](#å»ºç½®æµç¨‹)
  - [1. æœ¬åœ°å»ºç½®](#1-æœ¬åœ°å»ºç½®)
  - [2. å»ºç½®å„ªåŒ–](#2-å»ºç½®å„ªåŒ–)
  - [3. å»ºç½®é©—è­‰](#3-å»ºç½®é©—è­‰)
- [éƒ¨ç½²æ­¥é©Ÿ](#éƒ¨ç½²æ­¥é©Ÿ)
  - [æ–¹æ³• 1ï¼šä½¿ç”¨ Supabase Hostingï¼ˆæ¨è–¦ï¼‰](#æ–¹æ³•-1ä½¿ç”¨-supabase-hostingæ¨è–¦)
    - [1. å®‰è£ Supabase CLI](#1-å®‰è£-supabase-cli)
    - [2. ç™»å…¥ Supabase](#2-ç™»å…¥-supabase)
    - [3. é€£çµå°ˆæ¡ˆ](#3-é€£çµå°ˆæ¡ˆ)
    - [4. éƒ¨ç½²å‰ç«¯](#4-éƒ¨ç½²å‰ç«¯)
  - [æ–¹æ³• 2ï¼šä½¿ç”¨ GitHub Actionsï¼ˆè‡ªå‹•åŒ–ï¼‰](#æ–¹æ³•-2ä½¿ç”¨-github-actionsè‡ªå‹•åŒ–)
    - [1. é…ç½® GitHub Actions](#1-é…ç½®-github-actions)
    - [2. è¨­å®š GitHub Secrets](#2-è¨­å®š-github-secrets)
  - [æ–¹æ³• 3ï¼šæ‰‹å‹•éƒ¨ç½²åˆ° CDN](#æ–¹æ³•-3æ‰‹å‹•éƒ¨ç½²åˆ°-cdn)
    - [1. å»ºç½®æ‡‰ç”¨](#1-å»ºç½®æ‡‰ç”¨)
    - [2. ä¸Šå‚³åˆ° CDN](#2-ä¸Šå‚³åˆ°-cdn)
- [è³‡æ–™åº«é·ç§»](#è³‡æ–™åº«é·ç§»)
  - [1. åŸ·è¡Œé·ç§»](#1-åŸ·è¡Œé·ç§»)
  - [2. é©—è­‰é·ç§»](#2-é©—è­‰é·ç§»)
  - [3. é·ç§»é †åº](#3-é·ç§»é †åº)
- [é©—è­‰éƒ¨ç½²](#é©—è­‰éƒ¨ç½²)
  - [1. Smoke Testï¼ˆå†’ç…™æ¸¬è©¦ï¼‰](#1-smoke-testå†’ç…™æ¸¬è©¦)
  - [2. åŠŸèƒ½é©—è­‰](#2-åŠŸèƒ½é©—è­‰)
  - [3. æ•ˆèƒ½æª¢æŸ¥](#3-æ•ˆèƒ½æª¢æŸ¥)
  - [4. éŒ¯èª¤æª¢æŸ¥](#4-éŒ¯èª¤æª¢æŸ¥)
- [å›æ»¾æµç¨‹](#å›æ»¾æµç¨‹)
  - [1. å›æ»¾æ¢ä»¶](#1-å›æ»¾æ¢ä»¶)
  - [2. å›æ»¾æ­¥é©Ÿ](#2-å›æ»¾æ­¥é©Ÿ)
    - [æ–¹æ³• 1ï¼šä½¿ç”¨ Supabase Hosting](#æ–¹æ³•-1ä½¿ç”¨-supabase-hosting)
    - [æ–¹æ³• 2ï¼šä½¿ç”¨ Git](#æ–¹æ³•-2ä½¿ç”¨-git)
    - [æ–¹æ³• 3ï¼šè³‡æ–™åº«é·ç§»å›æ»¾](#æ–¹æ³•-3è³‡æ–™åº«é·ç§»å›æ»¾)
  - [3. å›æ»¾å¾Œæª¢æŸ¥](#3-å›æ»¾å¾Œæª¢æŸ¥)
- [ç›£æ§èˆ‡æ—¥èªŒ](#ç›£æ§èˆ‡æ—¥èªŒ)
  - [1. å‰ç«¯ç›£æ§](#1-å‰ç«¯ç›£æ§)
  - [2. å¾Œç«¯ç›£æ§](#2-å¾Œç«¯ç›£æ§)
  - [3. å‘Šè­¦è¨­å®š](#3-å‘Šè­¦è¨­å®š)
- [éƒ¨ç½²æª¢æŸ¥æ¸…å–®](#éƒ¨ç½²æª¢æŸ¥æ¸…å–®)
  - [éƒ¨ç½²å‰](#éƒ¨ç½²å‰)
  - [éƒ¨ç½²ä¸­](#éƒ¨ç½²ä¸­)
  - [éƒ¨ç½²å¾Œ](#éƒ¨ç½²å¾Œ)
- [å¸¸è¦‹éƒ¨ç½²å•é¡Œ](#å¸¸è¦‹éƒ¨ç½²å•é¡Œ)
  - [Q1: å»ºç½®å¤±æ•—](#q1-å»ºç½®å¤±æ•—)
  - [Q2: éƒ¨ç½²å¾Œ 404 éŒ¯èª¤](#q2-éƒ¨ç½²å¾Œ-404-éŒ¯èª¤)
  - [Q3: API é€£ç·šå¤±æ•—](#q3-api-é€£ç·šå¤±æ•—)
  - [Q4: è³‡æ–™åº«é·ç§»å¤±æ•—](#q4-è³‡æ–™åº«é·ç§»å¤±æ•—)
- [ç›¸é—œæ–‡æª”](#ç›¸é—œæ–‡æª”)

---


> ğŸ“‹ **ç›®çš„**ï¼šæä¾›å®Œæ•´çš„éƒ¨ç½²æµç¨‹ï¼Œç¢ºä¿éƒ¨ç½²é †æš¢ä¸¦æ¸›å°‘éƒ¨ç½²éŒ¯èª¤

**æœ€å¾Œæ›´æ–°**ï¼š2025-11-15
**ç¶­è­·è€…**ï¼šé–‹ç™¼åœ˜éšŠ

- --

## ğŸ“‹ ç›®éŒ„

- [éƒ¨ç½²æ¦‚è¿°](#éƒ¨ç½²æ¦‚è¿°)
- [éƒ¨ç½²å‰æº–å‚™](#éƒ¨ç½²å‰æº–å‚™)
- [ç”Ÿç”¢ç’°å¢ƒé…ç½®](#ç”Ÿç”¢ç’°å¢ƒé…ç½®)
- [å»ºç½®æµç¨‹](#å»ºç½®æµç¨‹)
- [éƒ¨ç½²æ­¥é©Ÿ](#éƒ¨ç½²æ­¥é©Ÿ)
- [è³‡æ–™åº«é·ç§»](#è³‡æ–™åº«é·ç§»)
- [é©—è­‰éƒ¨ç½²](#é©—è­‰éƒ¨ç½²)
- [å›æ»¾æµç¨‹](#å›æ»¾æµç¨‹)
- [ç›£æ§èˆ‡æ—¥èªŒ](#ç›£æ§èˆ‡æ—¥èªŒ)

**åƒè€ƒæ–‡æª”**ï¼š
- [éƒ¨ç½²åŸºç¤è¨­æ–½è¦–åœ–](./20-éƒ¨ç½²åŸºç¤è¨­æ–½è¦–åœ–.mermaid.md) - éƒ¨ç½²æ¶æ§‹
- [å¯è§€æ¸¬æ€§èˆ‡CI-CDç®¡é“åœ–](./23-å¯è§€æ¸¬æ€§èˆ‡CI-CDç®¡é“åœ–.mermaid.md) - CI/CD æµç¨‹
- [é–‹ç™¼å·¥ä½œæµç¨‹](./35-é–‹ç™¼å·¥ä½œæµç¨‹.md) - éƒ¨ç½²éšæ®µæµç¨‹

- --

## éƒ¨ç½²æ¦‚è¿°

### éƒ¨ç½²æ¶æ§‹

å°ˆæ¡ˆæ¡ç”¨ä»¥ä¸‹éƒ¨ç½²æ¶æ§‹ï¼š

- **å‰ç«¯æ‡‰ç”¨**ï¼šAngular 20 éœæ…‹ç¶²ç«™ï¼Œéƒ¨ç½²åˆ° Supabase Hosting æˆ– CDN
- **å¾Œç«¯æœå‹™**ï¼šSupabase Cloudï¼ˆPostgreSQLã€Authã€Storageã€Edge Functionsï¼‰
- **CI/CD**ï¼šGitHub Actions è‡ªå‹•åŒ–éƒ¨ç½²æµç¨‹

### éƒ¨ç½²ç’°å¢ƒ

- **é–‹ç™¼ç’°å¢ƒ**ï¼šæœ¬åœ°é–‹ç™¼ä¼ºæœå™¨ï¼ˆ`yarn start`ï¼‰
- **æ¸¬è©¦ç’°å¢ƒ**ï¼šSupabase Preview Deploymentsï¼ˆå¯é¸ï¼‰
- **ç”Ÿç”¢ç’°å¢ƒ**ï¼šSupabase Hosting + Supabase Cloud

- --

## éƒ¨ç½²å‰æº–å‚™

### 1. æª¢æŸ¥æ¸…å–®

- [ ] æ‰€æœ‰æ¸¬è©¦é€šéï¼ˆ`yarn test`ï¼‰
- [ ] ç¨‹å¼ç¢¼å“è³ªæª¢æŸ¥é€šéï¼ˆ`yarn lint`ï¼‰
- [ ] å»ºç½®æˆåŠŸï¼ˆ`yarn build`ï¼‰
- [ ] æ–‡æª”å·²æ›´æ–°ï¼ˆCHANGELOG.mdï¼‰
- [ ] ç’°å¢ƒè®Šæ•¸å·²é…ç½®
- [ ] è³‡æ–™åº«é·ç§»èˆ‡ RLS æ”¿ç­–å·²æº–å‚™ï¼ˆ`supabase migration up --dry-run`ï¼‰
- [ ] Edge Functions (å« `branch-merge`, `staging-finalize`) å·²é€šéæ¸¬è©¦

### 2. ç’°å¢ƒè®Šæ•¸æª¢æŸ¥

ç¢ºèªç”Ÿç”¢ç’°å¢ƒè®Šæ•¸å·²æ­£ç¢ºè¨­å®šï¼š

```typescript
// src/environments/environment.prod.ts
export const environment = {
  production: true,
  supabase: {
    url: 'https://your-project.supabase.co',
    anonKey: 'your-production-anon-key',
    storage: {
      documentBucket: 'blueprint-documents'
    }
  },
  cwa: {
    apiKey: 'your-production-cwa-key'
  }
};
```

### 3. å»ºç½®æ¸¬è©¦

åœ¨æœ¬åœ°åŸ·è¡Œç”Ÿç”¢å»ºç½®æ¸¬è©¦ï¼š

```bash
# å»ºç½®ç”Ÿç”¢ç‰ˆæœ¬
yarn build --configuration production

# æª¢æŸ¥å»ºç½®ç”¢ç‰©
ls -la dist/

# æœ¬åœ°é è¦½ï¼ˆå¯é¸ï¼‰
npx serve dist/
```

- --

## ç”Ÿç”¢ç’°å¢ƒé…ç½®

### 1. Supabase å°ˆæ¡ˆè¨­å®š

1. **å»ºç«‹ç”Ÿç”¢ç’°å¢ƒ Supabase å°ˆæ¡ˆ**ï¼ˆå¦‚æœå°šæœªå»ºç«‹ï¼‰
2. **é…ç½®ç’°å¢ƒè®Šæ•¸**ï¼š
   - åœ¨ Supabase Dashboard ä¸­è¨­å®šç’°å¢ƒè®Šæ•¸
   - æˆ–ä½¿ç”¨ Supabase CLI è¨­å®š

3. **é…ç½® Storage Buckets**ï¼š
   - ä¾ `docs/26-Storage-Bucketçµæ§‹è¦–åœ–.md` å»ºç«‹ `blueprint-assets/`, `task-attachments/`, `qa-evidence/`, `issue-attachments/` ç­‰ bucket
   - åŒ¹é…å°æ‡‰ RLS Policyï¼lifecycle è¨­å®šï¼ˆå…¬é–‹ bucket ä½¿ç”¨ CDNï¼Œç§æœ‰ bucket å•Ÿç”¨ Row Level Securityï¼‰
   - é©—è­‰ `branch_roles` èˆ‡ Storage Policies ä¸€è‡´ï¼ˆæ‰¿æ”¬åˆ†æ”¯åƒ…èƒ½å¯«å…¥è‡ªå·±è³‡æ–™å¤¾ï¼‰

### 2. ç’°å¢ƒè®Šæ•¸ç®¡ç†

**Supabase Dashboard**ï¼š
1. é€²å…¥ **Settings** â†’ **API**
2. è¤‡è£½ **Project URL** å’Œ **anon public** key
3. æ›´æ–° `environment.prod.ts`

**æˆ–ä½¿ç”¨ç’°å¢ƒè®Šæ•¸**ï¼ˆæ¨è–¦ï¼‰ï¼š
```bash
# åœ¨ CI/CD ç’°å¢ƒä¸­è¨­å®š
export SUPABASE_URL=https://your-project.supabase.co
export SUPABASE_ANON_KEY=your-anon-key
```

- --

## å»ºç½®æµç¨‹

### 1. æœ¬åœ°å»ºç½®

```bash
# å»ºç½®ç”Ÿç”¢ç‰ˆæœ¬
yarn build --configuration production

# å»ºç½®ç”¢ç‰©ä½æ–¼ dist/ ç›®éŒ„
```

### 2. å»ºç½®å„ªåŒ–

å»ºç½®éç¨‹æœƒè‡ªå‹•åŸ·è¡Œä»¥ä¸‹å„ªåŒ–ï¼š

- **Tree Shaking** - ç§»é™¤æœªä½¿ç”¨çš„ç¨‹å¼ç¢¼
- **Minification** - å£“ç¸® JavaScript å’Œ CSS
- **Bundle Optimization** - ç¨‹å¼ç¢¼åˆ†å‰²å’Œæ‡¶åŠ è¼‰
- **Source Maps** - ç”Ÿæˆ Source Mapsï¼ˆå¯é¸ï¼‰

### 3. å»ºç½®é©—è­‰

```bash
# æª¢æŸ¥å»ºç½®ç”¢ç‰©å¤§å°
du -sh dist/

# æª¢æŸ¥ä¸»è¦æª”æ¡ˆ
ls -lh dist/*.js
ls -lh dist/*.css

# é©—è­‰å»ºç½®å®Œæ•´æ€§
# æª¢æŸ¥æ˜¯å¦æœ‰éºæ¼çš„æª”æ¡ˆ
```

- --

## éƒ¨ç½²æ­¥é©Ÿ

### æ–¹æ³• 1ï¼šä½¿ç”¨ Supabase Hostingï¼ˆæ¨è–¦ï¼‰

#### 1. å®‰è£ Supabase CLI

```bash
npm install -g supabase
```

#### 2. ç™»å…¥ Supabase

```bash
supabase login
```

#### 3. é€£çµå°ˆæ¡ˆ

```bash
supabase link --project-ref your-project-ref
```

#### 4. éƒ¨ç½²å‰ç«¯

```bash
# å»ºç½®æ‡‰ç”¨
yarn build --configuration production

# éƒ¨ç½²åˆ° Supabase Hosting
supabase hosting deploy dist/

# éƒ¨ç½²è³‡æ–™åº«é·ç§»
supabase db push    # æˆ– supabase migration up

# éƒ¨ç½² Edge Functions
supabase functions deploy branch-merge --project-ref your-project-ref
supabase functions deploy staging-finalize --project-ref your-project-ref
```

### æ–¹æ³• 2ï¼šä½¿ç”¨ GitHub Actionsï¼ˆè‡ªå‹•åŒ–ï¼‰

#### 1. é…ç½® GitHub Actions

å»ºç«‹ `.github/workflows/deploy.yml`ï¼š

```yaml
name: Deploy to Production

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '20'

      - name: Install dependencies
        run: yarn install --frozen-lockfile

      - name: Lint
        run: yarn lint

      - name: Test
        run: yarn test --watch=false

      - name: Build
        run: yarn build --configuration production
        env:
          SUPABASE_URL: ${{ secrets.SUPABASE_URL }}
          SUPABASE_ANON_KEY: ${{ secrets.SUPABASE_ANON_KEY }}

      - name: Deploy to Supabase
        uses: supabase/setup-cli@v1
        with:
          version: latest
        env:
          SUPABASE_ACCESS_TOKEN: ${{ secrets.SUPABASE_ACCESS_TOKEN }}

      - name: Deploy
        run: |
          supabase link --project-ref ${{ secrets.SUPABASE_PROJECT_REF }}
          supabase hosting deploy dist/
```

#### 2. è¨­å®š GitHub Secrets

åœ¨ GitHub Repository Settings â†’ Secrets ä¸­è¨­å®šï¼š

- `SUPABASE_URL` - Supabase å°ˆæ¡ˆ URL
- `SUPABASE_ANON_KEY` - Supabase Anon Key
- `SUPABASE_ACCESS_TOKEN` - Supabase Access Token
- `SUPABASE_PROJECT_REF` - Supabase å°ˆæ¡ˆ Ref

### æ–¹æ³• 3ï¼šæ‰‹å‹•éƒ¨ç½²åˆ° CDN

#### 1. å»ºç½®æ‡‰ç”¨

```bash
yarn build --configuration production
```

#### 2. ä¸Šå‚³åˆ° CDN

ä½¿ç”¨ CDN æä¾›å•†çš„ CLI æˆ– Dashboard ä¸Šå‚³ `dist/` ç›®éŒ„å…§å®¹ã€‚

- --

## è³‡æ–™åº«é·ç§»

### 1. åŸ·è¡Œé·ç§»

**ä½¿ç”¨ Supabase CLI**ï¼š

```bash
# é€£çµå°ˆæ¡ˆ
supabase link --project-ref your-project-ref

# æ¨é€é·ç§»
supabase db push

# æˆ–åŸ·è¡Œç‰¹å®šé·ç§»
supabase migration up
```

**ä½¿ç”¨ Supabase Dashboard**ï¼š

1. é€²å…¥ **SQL Editor**
2. è¤‡è£½é·ç§»è…³æœ¬å…§å®¹
3. åŸ·è¡Œ SQL è…³æœ¬

### 2. é©—è­‰é·ç§»

```bash
# ä½¿ç”¨ Supabase MCP å·¥å…·é©—è­‰
@SUPABASE åˆ—å‡ºæ‰€æœ‰è³‡æ–™åº«è¡¨
@SUPABASE åˆ—å‡ºæ‰€æœ‰é·ç§»
```

### 3. é·ç§»é †åº

ç¢ºä¿é·ç§»æŒ‰é †åºåŸ·è¡Œï¼š

1. åŸºç¤è¡¨çµæ§‹ï¼ˆ`00000000000000_initial_schema.sql`ï¼‰
2. RLS ç­–ç•¥ï¼ˆ`00000000000001_rls_policies.sql`ï¼‰
3. ç¨®å­è³‡æ–™ï¼ˆ`00000000000002_seed_data.sql`ï¼Œå¯é¸ï¼‰
4. å…¶ä»–é·ç§»ï¼ˆæŒ‰æ™‚é–“é †åºï¼‰

- --

## é©—è­‰éƒ¨ç½²

### 1. Smoke Testï¼ˆå†’ç…™æ¸¬è©¦ï¼‰

éƒ¨ç½²å¾ŒåŸ·è¡Œä»¥ä¸‹åŸºæœ¬æ¸¬è©¦ï¼š

- [ ] é¦–é å¯ä»¥æ­£å¸¸è¼‰å…¥
- [ ] ç™»å…¥åŠŸèƒ½æ­£å¸¸
- [ ] ä¸»è¦åŠŸèƒ½é é¢å¯ä»¥è¨ªå•
- [ ] API è«‹æ±‚æ­£å¸¸
- [ ] ç„¡ Console éŒ¯èª¤

### 2. åŠŸèƒ½é©—è­‰

- [ ] è—åœ–åˆ—è¡¨å¯ä»¥è¼‰å…¥
- [ ] å¯ä»¥å»ºç«‹æ–°è—åœ–
- [ ] ä»»å‹™ç®¡ç†åŠŸèƒ½æ­£å¸¸
- [ ] æª”æ¡ˆä¸Šå‚³åŠŸèƒ½æ­£å¸¸
- [ ] é€šçŸ¥åŠŸèƒ½æ­£å¸¸

### 3. æ•ˆèƒ½æª¢æŸ¥

- [ ] é é¢è¼‰å…¥æ™‚é–“ < 3 ç§’
- [ ] API å›æ‡‰æ™‚é–“ < 500ms
- [ ] ç„¡è¨˜æ†¶é«”æ´©æ¼
- [ ] Core Web Vitals é”æ¨™

### 4. éŒ¯èª¤æª¢æŸ¥

- [ ] æª¢æŸ¥éŒ¯èª¤æ—¥èªŒ
- [ ] ç¢ºèªç„¡ 500 éŒ¯èª¤
- [ ] ç¢ºèª RLS ç­–ç•¥æ­£å¸¸é‹ä½œ

- --

## å›æ»¾æµç¨‹

### 1. å›æ»¾æ¢ä»¶

ä»¥ä¸‹æƒ…æ³éœ€è¦å›æ»¾ï¼š

- Smoke Test å¤±æ•—
- éŒ¯èª¤ç‡è¶…éé–¾å€¼ï¼ˆ>5%ï¼‰
- æ•ˆèƒ½æŒ‡æ¨™åš´é‡ä¸‹é™
- é—œéµåŠŸèƒ½ç„¡æ³•ä½¿ç”¨

### 2. å›æ»¾æ­¥é©Ÿ

#### æ–¹æ³• 1ï¼šä½¿ç”¨ Supabase Hosting

```bash
# åˆ—å‡ºéƒ¨ç½²æ­·å²
supabase hosting list

# å›æ»¾åˆ°ä¸Šä¸€ç‰ˆæœ¬
supabase hosting rollback <deployment-id>
```

#### æ–¹æ³• 2ï¼šä½¿ç”¨ Git

```bash
# åˆ‡æ›åˆ°ä¸Šä¸€ç©©å®šç‰ˆæœ¬
git checkout <previous-stable-tag>

# é‡æ–°å»ºç½®å’Œéƒ¨ç½²
yarn build --configuration production
supabase hosting deploy dist/
```

#### æ–¹æ³• 3ï¼šè³‡æ–™åº«é·ç§»å›æ»¾

```bash
# å›æ»¾è³‡æ–™åº«é·ç§»
supabase migration down

# æˆ–æ‰‹å‹•åŸ·è¡Œå›æ»¾ SQL
# åœ¨ Supabase Dashboard SQL Editor ä¸­åŸ·è¡Œ
```

### 3. å›æ»¾å¾Œæª¢æŸ¥

- [ ] ç¢ºèªæ‡‰ç”¨æ­£å¸¸é‹ä½œ
- [ ] ç¢ºèªè³‡æ–™åº«ç‹€æ…‹æ­£ç¢º
- [ ] é€šçŸ¥åœ˜éšŠæˆå“¡
- [ ] åˆ†æå¤±æ•—åŸå› 
- [ ] æº–å‚™ä¿®å¾©æ–¹æ¡ˆ

- --

## ç›£æ§èˆ‡æ—¥èªŒ

### 1. å‰ç«¯ç›£æ§

**éŒ¯èª¤è¿½è¹¤**ï¼š
- ä½¿ç”¨ `ErrorStateService` è¨˜éŒ„éŒ¯èª¤
- æ•´åˆéŒ¯èª¤è¿½è¹¤æœå‹™ï¼ˆå¦‚ Sentryï¼Œå¯é¸ï¼‰

**æ•ˆèƒ½ç›£æ§**ï¼š
- Core Web Vitals ç›£æ§
- é é¢è¼‰å…¥æ™‚é–“è¿½è¹¤
- API å›æ‡‰æ™‚é–“è¿½è¹¤

### 2. å¾Œç«¯ç›£æ§

**ä½¿ç”¨ Supabase Dashboard**ï¼š
- æŸ¥çœ‹ API æ—¥èªŒ
- æŸ¥çœ‹è³‡æ–™åº«æŸ¥è©¢æ—¥èªŒ
- æŸ¥çœ‹ Edge Functions æ—¥èªŒ

**ä½¿ç”¨ Supabase MCP å·¥å…·**ï¼š
```bash
# ç²å– API æ—¥èªŒ
@SUPABASE ç²å– API æ—¥èªŒ

# ç²å– Edge Functions æ—¥èªŒ
@SUPABASE ç²å– Edge Functions æ—¥èªŒ

# ç²å–è³‡æ–™åº«æ—¥èªŒ
@SUPABASE ç²å– Postgres æ—¥èªŒ
```

### 3. å‘Šè­¦è¨­å®š

åœ¨ Supabase Dashboard ä¸­è¨­å®šå‘Šè­¦ï¼š

- **éŒ¯èª¤ç‡å‘Šè­¦**ï¼šéŒ¯èª¤ç‡ > 1%
- **æ•ˆèƒ½å‘Šè­¦**ï¼šAPI å›æ‡‰æ™‚é–“ > 1 ç§’
- **è³‡æºå‘Šè­¦**ï¼šé…é¡ä½¿ç”¨ç‡ > 75%

- --

## éƒ¨ç½²æª¢æŸ¥æ¸…å–®

### éƒ¨ç½²å‰

- [ ] æ‰€æœ‰æ¸¬è©¦é€šé
- [ ] ç¨‹å¼ç¢¼å“è³ªæª¢æŸ¥é€šé
- [ ] å»ºç½®æˆåŠŸ
- [ ] ç’°å¢ƒè®Šæ•¸å·²é…ç½®
- [ ] è³‡æ–™åº«é·ç§»å·²æº–å‚™
- [ ] æ–‡æª”å·²æ›´æ–°

### éƒ¨ç½²ä¸­

- [ ] åŸ·è¡Œå»ºç½®
- [ ] ä¸Šå‚³å‰ç«¯æª”æ¡ˆ
- [ ] åŸ·è¡Œè³‡æ–™åº«é·ç§»
- [ ] é©—è­‰éƒ¨ç½²æˆåŠŸ

### éƒ¨ç½²å¾Œ

- [ ] åŸ·è¡Œ Smoke Test
- [ ] é©—è­‰ä¸»è¦åŠŸèƒ½
- [ ] æª¢æŸ¥éŒ¯èª¤æ—¥èªŒ
- [ ] ç›£æ§æ•ˆèƒ½æŒ‡æ¨™
- [ ] é€šçŸ¥åœ˜éšŠæˆå“¡

- --

## å¸¸è¦‹éƒ¨ç½²å•é¡Œ

### Q1: å»ºç½®å¤±æ•—

**å•é¡Œ**ï¼š`yarn build` å¤±æ•—

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
1. æª¢æŸ¥éŒ¯èª¤è¨Šæ¯
2. ç¢ºèªç’°å¢ƒè®Šæ•¸å·²è¨­å®š
3. æ¸…é™¤å»ºç½®å¿«å–ï¼š`yarn ng cache clean`
4. æª¢æŸ¥è¨˜æ†¶é«”ä½¿ç”¨

### Q2: éƒ¨ç½²å¾Œ 404 éŒ¯èª¤

**å•é¡Œ**ï¼šéƒ¨ç½²å¾Œé é¢é¡¯ç¤º 404

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
1. æª¢æŸ¥è·¯ç”±é…ç½®ï¼ˆ`useHash` è¨­å®šï¼‰
2. ç¢ºèª `index.html` å·²æ­£ç¢ºä¸Šå‚³
3. æª¢æŸ¥ CDN/Hosting çš„ Rewrite è¦å‰‡

### Q3: API é€£ç·šå¤±æ•—

**å•é¡Œ**ï¼šéƒ¨ç½²å¾Œ API è«‹æ±‚å¤±æ•—

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
1. æª¢æŸ¥ç’°å¢ƒè®Šæ•¸ä¸­çš„ Supabase URL å’Œ Key
2. ç¢ºèª Supabase å°ˆæ¡ˆç‹€æ…‹
3. æª¢æŸ¥ CORS è¨­å®š
4. æª¢æŸ¥ç¶²è·¯é€£ç·š

### Q4: è³‡æ–™åº«é·ç§»å¤±æ•—

**å•é¡Œ**ï¼šè³‡æ–™åº«é·ç§»åŸ·è¡Œå¤±æ•—

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
1. æª¢æŸ¥é·ç§»è…³æœ¬èªæ³•
2. ç¢ºèªé·ç§»é †åºæ­£ç¢º
3. æª¢æŸ¥è³‡æ–™åº«æ¬Šé™
4. æŸ¥çœ‹è©³ç´°éŒ¯èª¤è¨Šæ¯

- --

## ç›¸é—œæ–‡æª”

- [éƒ¨ç½²åŸºç¤è¨­æ–½è¦–åœ–](./20-éƒ¨ç½²åŸºç¤è¨­æ–½è¦–åœ–.mermaid.md)
- [å¯è§€æ¸¬æ€§èˆ‡CI-CDç®¡é“åœ–](./23-å¯è§€æ¸¬æ€§èˆ‡CI-CDç®¡é“åœ–.mermaid.md)
- [é–‹ç™¼å·¥ä½œæµç¨‹](./35-é–‹ç™¼å·¥ä½œæµç¨‹.md)
- [å¸¸è¦‹å•é¡Œ FAQ](./36-å¸¸è¦‹å•é¡Œ-FAQ.md)

- --

**æœ€å¾Œæ›´æ–°**ï¼š2025-11-13
**ç¶­è­·è€…**ï¼šé–‹ç™¼åœ˜éšŠ


